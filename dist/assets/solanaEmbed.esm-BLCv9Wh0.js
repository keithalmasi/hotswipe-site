import{r as ia,a as Ct,g as Ut,c as oa,d as En,P as Ri}from"./index-pJdhfvY3.js";var Sn={exports:{}},Ii;function nn(){if(Ii)return Sn.exports;Ii=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(N,$,G){return Function.prototype.apply.call(N,$,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:t=function(N){return Object.getOwnPropertyNames(N)};function r(B){console&&console.warn&&console.warn(B)}var o=Number.isNaN||function(N){return N!==N};function i(){i.init.call(this)}Sn.exports=i,Sn.exports.once=f,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function u(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(B){if(typeof B!="number"||B<0||o(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");a=B}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||o(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function g(B){return B._maxListeners===void 0?i.defaultMaxListeners:B._maxListeners}i.prototype.getMaxListeners=function(){return g(this)},i.prototype.emit=function(N){for(var $=[],G=1;G<arguments.length;G++)$.push(arguments[G]);var s=N==="error",w=this._events;if(w!==void 0)s=s&&w.error===void 0;else if(!s)return!1;if(s){var l;if($.length>0&&(l=$[0]),l instanceof Error)throw l;var d=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw d.context=l,d}var y=w[N];if(y===void 0)return!1;if(typeof y=="function")e(y,this,$);else for(var h=y.length,L=D(y,h),G=0;G<h;++G)e(L[G],this,$);return!0};function b(B,N,$,G){var s,w,l;if(u($),w=B._events,w===void 0?(w=B._events=Object.create(null),B._eventsCount=0):(w.newListener!==void 0&&(B.emit("newListener",N,$.listener?$.listener:$),w=B._events),l=w[N]),l===void 0)l=w[N]=$,++B._eventsCount;else if(typeof l=="function"?l=w[N]=G?[$,l]:[l,$]:G?l.unshift($):l.push($),s=g(B),s>0&&l.length>s&&!l.warned){l.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=B,d.type=N,d.count=l.length,r(d)}return B}i.prototype.addListener=function(N,$){return b(this,N,$,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(N,$){return b(this,N,$,!0)};function C(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(B,N,$){var G={fired:!1,wrapFn:void 0,target:B,type:N,listener:$},s=C.bind(G);return s.listener=$,G.wrapFn=s,s}i.prototype.once=function(N,$){return u($),this.on(N,x(this,N,$)),this},i.prototype.prependOnceListener=function(N,$){return u($),this.prependListener(N,x(this,N,$)),this},i.prototype.removeListener=function(N,$){var G,s,w,l,d;if(u($),s=this._events,s===void 0)return this;if(G=s[N],G===void 0)return this;if(G===$||G.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete s[N],s.removeListener&&this.emit("removeListener",N,G.listener||$));else if(typeof G!="function"){for(w=-1,l=G.length-1;l>=0;l--)if(G[l]===$||G[l].listener===$){d=G[l].listener,w=l;break}if(w<0)return this;w===0?G.shift():m(G,w),G.length===1&&(s[N]=G[0]),s.removeListener!==void 0&&this.emit("removeListener",N,d||$)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(N){var $,G,s;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[N]),this;if(arguments.length===0){var w=Object.keys(G),l;for(s=0;s<w.length;++s)l=w[s],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=G[N],typeof $=="function")this.removeListener(N,$);else if($!==void 0)for(s=$.length-1;s>=0;s--)this.removeListener(N,$[s]);return this};function R(B,N,$){var G=B._events;if(G===void 0)return[];var s=G[N];return s===void 0?[]:typeof s=="function"?$?[s.listener||s]:[s]:$?_(s):D(s,s.length)}i.prototype.listeners=function(N){return R(this,N,!0)},i.prototype.rawListeners=function(N){return R(this,N,!1)},i.listenerCount=function(B,N){return typeof B.listenerCount=="function"?B.listenerCount(N):j.call(B,N)},i.prototype.listenerCount=j;function j(B){var N=this._events;if(N!==void 0){var $=N[B];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function D(B,N){for(var $=new Array(N),G=0;G<N;++G)$[G]=B[G];return $}function m(B,N){for(;N+1<B.length;N++)B[N]=B[N+1];B.pop()}function _(B){for(var N=new Array(B.length),$=0;$<N.length;++$)N[$]=B[$].listener||B[$];return N}function f(B,N){return new Promise(function($,G){function s(l){B.removeListener(N,w),G(l)}function w(){typeof B.removeListener=="function"&&B.removeListener("error",s),$([].slice.call(arguments))}v(B,N,w,{once:!0}),N!=="error"&&c(B,s,{once:!0})})}function c(B,N,$){typeof B.on=="function"&&v(B,"error",N,$)}function v(B,N,$,G){if(typeof B.on=="function")G.once?B.once(N,$):B.on(N,$);else if(typeof B.addEventListener=="function")B.addEventListener(N,function s(w){G.once&&B.removeEventListener(N,s),$(w)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return Sn.exports}var sa=nn(),ar={},Ti;function aa(){if(Ti)return ar;Ti=1;var n=ia().Buffer,e=n.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(f){if(!f)return"utf8";for(var c;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(c)return;f=(""+f).toLowerCase(),c=!0}}function r(f){var c=t(f);if(typeof c!="string"&&(n.isEncoding===e||!e(f)))throw new Error("Unknown encoding: "+f);return c||f}ar.StringDecoder=o;function o(f){this.encoding=r(f);var c;switch(this.encoding){case"utf16le":this.text=x,this.end=R,c=4;break;case"utf8":this.fillLast=g,c=4;break;case"base64":this.text=j,this.end=D,c=3;break;default:this.write=m,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(c)}o.prototype.write=function(f){if(f.length===0)return"";var c,v;if(this.lastNeed){if(c=this.fillLast(f),c===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<f.length?c?c+this.text(f,v):this.text(f,v):c||""},o.prototype.end=C,o.prototype.text=b,o.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function i(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function a(f,c,v){var B=c.length-1;if(B<v)return 0;var N=i(c[B]);return N>=0?(N>0&&(f.lastNeed=N-1),N):--B<v||N===-2?0:(N=i(c[B]),N>=0?(N>0&&(f.lastNeed=N-2),N):--B<v||N===-2?0:(N=i(c[B]),N>=0?(N>0&&(N===2?N=0:f.lastNeed=N-3),N):0))}function u(f,c,v){if((c[0]&192)!==128)return f.lastNeed=0,"�";if(f.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return f.lastNeed=1,"�";if(f.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return f.lastNeed=2,"�"}}function g(f){var c=this.lastTotal-this.lastNeed,v=u(this,f);if(v!==void 0)return v;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length}function b(f,c){var v=a(this,f,c);if(!this.lastNeed)return f.toString("utf8",c);this.lastTotal=v;var B=f.length-(v-this.lastNeed);return f.copy(this.lastChar,0,B),f.toString("utf8",c,B)}function C(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+"�":c}function x(f,c){if((f.length-c)%2===0){var v=f.toString("utf16le",c);if(v){var B=v.charCodeAt(v.length-1);if(B>=55296&&B<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function R(f){var c=f&&f.length?this.write(f):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,v)}return c}function j(f,c){var v=(f.length-c)%3;return v===0?f.toString("base64",c):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",c,f.length-v))}function D(f){var c=f&&f.length?this.write(f):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function m(f){return f.toString(this.encoding)}function _(f){return f&&f.length?this.write(f):""}return ar}function Qt(n){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(n)}function la(n,e){if(Qt(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Qt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ua(n){var e=la(n,"string");return Qt(e)=="symbol"?e:e+""}function ge(n,e,t){return(e=ua(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xi(Object(t),!0).forEach(function(r){ge(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var lr={exports:{}},ur={exports:{}},fr,Oi;function Ie(){if(Oi)return fr;Oi=1;class n extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let o=0;o<t.length;o++)r+=`    ${t[o].stack}
`;super(r),this.name="AggregateError",this.errors=t}}return fr={AggregateError:n,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},fr}var cr={exports:{}},dr,Ni;function Ko(){return Ni||(Ni=1,dr={format(n,...e){return n.replace(/%([sdifj])/g,function(...[t,r]){const o=e.shift();return r==="f"?o.toFixed(6):r==="j"?JSON.stringify(o):r==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(n){switch(typeof n){case"string":if(n.includes("'"))if(n.includes('"')){if(!n.includes("`")&&!n.includes("${"))return`\`${n}\``}else return`"${n}"`;return`'${n}'`;case"number":return isNaN(n)?"NaN":Object.is(n,-0)?String(n):n;case"bigint":return`${String(n)}n`;case"boolean":case"undefined":return String(n);case"object":return"{}"}}}),dr}var hr,Ci;function Be(){if(Ci)return hr;Ci=1;const{format:n,inspect:e}=Ko(),{AggregateError:t}=Ie(),r=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",g={};function b(_,f){if(!_)throw new g.ERR_INTERNAL_ASSERTION(f)}function C(_){let f="",c=_.length;const v=_[0]==="-"?1:0;for(;c>=v+4;c-=3)f=`_${_.slice(c-3,c)}${f}`;return`${_.slice(0,c)}${f}`}function x(_,f,c){if(typeof f=="function")return b(f.length<=c.length,`Code: ${_}; The provided arguments length (${c.length}) does not match the required ones (${f.length}).`),f(...c);const v=(f.match(/%[dfijoOs]/g)||[]).length;return b(v===c.length,`Code: ${_}; The provided arguments length (${c.length}) does not match the required ones (${v}).`),c.length===0?f:n(f,...c)}function R(_,f,c){c||(c=Error);class v extends c{constructor(...N){super(x(_,f,N))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=_,v.prototype[o]=!0,g[_]=v}function j(_){const f=u+_.name;return Object.defineProperty(_,"name",{value:f}),_}function D(_,f){if(_&&f&&_!==f){if(Array.isArray(f.errors))return f.errors.push(_),f;const c=new r([f,_],f.message);return c.code=f.code,c}return _||f}class m extends Error{constructor(f="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new g.ERR_INVALID_ARG_TYPE("options","Object",c);super(f,c),this.code="ABORT_ERR",this.name="AbortError"}}return R("ERR_ASSERTION","%s",Error),R("ERR_INVALID_ARG_TYPE",(_,f,c)=>{b(typeof _=="string","'name' must be a string"),Array.isArray(f)||(f=[f]);let v="The ";_.endsWith(" argument")?v+=`${_} `:v+=`"${_}" ${_.includes(".")?"property":"argument"} `,v+="must be ";const B=[],N=[],$=[];for(const s of f)b(typeof s=="string","All expected entries have to be of type string"),i.includes(s)?B.push(s.toLowerCase()):a.test(s)?N.push(s):(b(s!=="object",'The value "object" should be written as "Object"'),$.push(s));if(N.length>0){const s=B.indexOf("object");s!==-1&&(B.splice(B,s,1),N.push("Object"))}if(B.length>0){switch(B.length){case 1:v+=`of type ${B[0]}`;break;case 2:v+=`one of type ${B[0]} or ${B[1]}`;break;default:{const s=B.pop();v+=`one of type ${B.join(", ")}, or ${s}`}}(N.length>0||$.length>0)&&(v+=" or ")}if(N.length>0){switch(N.length){case 1:v+=`an instance of ${N[0]}`;break;case 2:v+=`an instance of ${N[0]} or ${N[1]}`;break;default:{const s=N.pop();v+=`an instance of ${N.join(", ")}, or ${s}`}}$.length>0&&(v+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(v+="an "),v+=`${$[0]}`;break;case 2:v+=`one of ${$[0]} or ${$[1]}`;break;default:{const s=$.pop();v+=`one of ${$.join(", ")}, or ${s}`}}if(c==null)v+=`. Received ${c}`;else if(typeof c=="function"&&c.name)v+=`. Received function ${c.name}`;else if(typeof c=="object"){var G;if((G=c.constructor)!==null&&G!==void 0&&G.name)v+=`. Received an instance of ${c.constructor.name}`;else{const s=e(c,{depth:-1});v+=`. Received ${s}`}}else{let s=e(c,{colors:!1});s.length>25&&(s=`${s.slice(0,25)}...`),v+=`. Received type ${typeof c} (${s})`}return v},TypeError),R("ERR_INVALID_ARG_VALUE",(_,f,c="is invalid")=>{let v=e(f);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${c}. Received ${v}`},TypeError),R("ERR_INVALID_RETURN_VALUE",(_,f,c)=>{var v;const B=c!=null&&(v=c.constructor)!==null&&v!==void 0&&v.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${_} to be returned from the "${f}" function but got ${B}.`},TypeError),R("ERR_MISSING_ARGS",(..._)=>{b(_.length>0,"At least one arg needs to be specified");let f;const c=_.length;switch(_=(Array.isArray(_)?_:[_]).map(v=>`"${v}"`).join(" or "),c){case 1:f+=`The ${_[0]} argument`;break;case 2:f+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const v=_.pop();f+=`The ${_.join(", ")}, and ${v} arguments`}break}return`${f} must be specified`},TypeError),R("ERR_OUT_OF_RANGE",(_,f,c)=>{b(f,'Missing "range" argument');let v;if(Number.isInteger(c)&&Math.abs(c)>2**32)v=C(String(c));else if(typeof c=="bigint"){v=String(c);const B=BigInt(2)**BigInt(32);(c>B||c<-B)&&(v=C(v)),v+="n"}else v=e(c);return`The value of "${_}" is out of range. It must be ${f}. Received ${v}`},RangeError),R("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),R("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),R("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),R("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),R("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),R("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),R("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),R("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),R("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),R("ERR_STREAM_WRITE_AFTER_END","write after end",Error),R("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),hr={AbortError:m,aggregateTwoErrors:j(D),hideStackFrames:j,codes:g},hr}var Vt={exports:{}},Li;function en(){if(Li)return Vt.exports;Li=1;const{AbortController:n,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Vt.exports=n,Vt.exports.AbortSignal=e,Vt.exports.default=n,Vt.exports}var Pi;function qe(){return Pi||(Pi=1,function(n){const e=Ct(),{format:t,inspect:r}=Ko(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Be(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:u}=Ie(),g=globalThis.AbortSignal||en().AbortSignal,b=globalThis.AbortController||en().AbortController,C=Object.getPrototypeOf(async function(){}).constructor,x=globalThis.Blob||e.Blob,R=typeof x<"u"?function(_){return _ instanceof x}:function(_){return!1},j=(m,_)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new o(_,"AbortSignal",m)},D=(m,_)=>{if(typeof m!="function")throw new o(_,"Function",m)};n.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(m){let _=!1;return function(...f){_||(_=!0,m.apply(this,f))}},createDeferredPromise:function(){let m,_;return{promise:new Promise((c,v)=>{m=c,_=v}),resolve:m,reject:_}},promisify(m){return new Promise((_,f)=>{m((c,...v)=>c?f(c):_(...v))})},debuglog(){return function(){}},format:t,inspect:r,types:{isAsyncFunction(m){return m instanceof C},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:R,deprecate(m,_){return m},addAbortListener:nn().addAbortListener||function(_,f){if(_===void 0)throw new o("signal","AbortSignal",_);j(_,"signal"),D(f,"listener");let c;return _.aborted?queueMicrotask(()=>f()):(_.addEventListener("abort",f,{__proto__:null,once:!0,[i]:!0}),c=()=>{_.removeEventListener("abort",f)}),{__proto__:null,[u](){var v;(v=c)===null||v===void 0||v()}}},AbortSignalAny:g.any||function(_){if(_.length===1)return _[0];const f=new b,c=()=>f.abort();return _.forEach(v=>{j(v,"signals"),v.addEventListener("abort",c,{once:!0})}),f.signal.addEventListener("abort",()=>{_.forEach(v=>v.removeEventListener("abort",c))},{once:!0}),f.signal}},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(cr)),cr.exports}var vn={},gr,Mi;function rn(){if(Mi)return gr;Mi=1;const{ArrayIsArray:n,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:r,NumberIsInteger:o,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:u,NumberParseInt:g,ObjectPrototypeHasOwnProperty:b,RegExpPrototypeExec:C,String:x,StringPrototypeToUpperCase:R,StringPrototypeTrim:j}=Ie(),{hideStackFrames:D,codes:{ERR_SOCKET_BAD_PORT:m,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:f,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:v}}=Be(),{normalizeEncoding:B}=qe(),{isAsyncFunction:N,isArrayBufferView:$}=qe().types,G={};function s(q){return q===(q|0)}function w(q){return q===q>>>0}const l=/^[0-7]+$/,d="must be a 32-bit unsigned integer or an octal string";function y(q,X,ne){if(typeof q>"u"&&(q=ne),typeof q=="string"){if(C(l,q)===null)throw new f(X,q,d);q=g(q,8)}return p(q,X),q}const h=D((q,X,ne=u,Z=a)=>{if(typeof q!="number")throw new _(X,"number",q);if(!o(q))throw new c(X,"an integer",q);if(q<ne||q>Z)throw new c(X,`>= ${ne} && <= ${Z}`,q)}),L=D((q,X,ne=-2147483648,Z=2147483647)=>{if(typeof q!="number")throw new _(X,"number",q);if(!o(q))throw new c(X,"an integer",q);if(q<ne||q>Z)throw new c(X,`>= ${ne} && <= ${Z}`,q)}),p=D((q,X,ne=!1)=>{if(typeof q!="number")throw new _(X,"number",q);if(!o(q))throw new c(X,"an integer",q);const Z=ne?1:0,we=4294967295;if(q<Z||q>we)throw new c(X,`>= ${Z} && <= ${we}`,q)});function A(q,X){if(typeof q!="string")throw new _(X,"string",q)}function P(q,X,ne=void 0,Z){if(typeof q!="number")throw new _(X,"number",q);if(ne!=null&&q<ne||Z!=null&&q>Z||(ne!=null||Z!=null)&&i(q))throw new c(X,`${ne!=null?`>= ${ne}`:""}${ne!=null&&Z!=null?" && ":""}${Z!=null?`<= ${Z}`:""}`,q)}const E=D((q,X,ne)=>{if(!e(ne,q)){const we="must be one of: "+t(r(ne,Ce=>typeof Ce=="string"?`'${Ce}'`:x(Ce)),", ");throw new f(X,q,we)}});function k(q,X){if(typeof q!="boolean")throw new _(X,"boolean",q)}function S(q,X,ne){return q==null||!b(q,X)?ne:q[X]}const F=D((q,X,ne=null)=>{const Z=S(ne,"allowArray",!1),we=S(ne,"allowFunction",!1);if(!S(ne,"nullable",!1)&&q===null||!Z&&n(q)||typeof q!="object"&&(!we||typeof q!="function"))throw new _(X,"Object",q)}),J=D((q,X)=>{if(q!=null&&typeof q!="object"&&typeof q!="function")throw new _(X,"a dictionary",q)}),H=D((q,X,ne=0)=>{if(!n(q))throw new _(X,"Array",q);if(q.length<ne){const Z=`must be longer than ${ne}`;throw new f(X,q,Z)}});function ee(q,X){H(q,X);for(let ne=0;ne<q.length;ne++)A(q[ne],`${X}[${ne}]`)}function Q(q,X){H(q,X);for(let ne=0;ne<q.length;ne++)k(q[ne],`${X}[${ne}]`)}function le(q,X){H(q,X);for(let ne=0;ne<q.length;ne++){const Z=q[ne],we=`${X}[${ne}]`;if(Z==null)throw new _(we,"AbortSignal",Z);fe(Z,we)}}function ue(q,X="signal"){if(A(q,X),G[q]===void 0)throw G[R(q)]!==void 0?new v(q+" (signals must use all capital letters)"):new v(q)}const K=D((q,X="buffer")=>{if(!$(q))throw new _(X,["Buffer","TypedArray","DataView"],q)});function Y(q,X){const ne=B(X),Z=q.length;if(ne==="hex"&&Z%2!==0)throw new f("encoding",X,`is invalid for data of length ${Z}`)}function oe(q,X="Port",ne=!0){if(typeof q!="number"&&typeof q!="string"||typeof q=="string"&&j(q).length===0||+q!==+q>>>0||q>65535||q===0&&!ne)throw new m(X,q,ne);return q|0}const fe=D((q,X)=>{if(q!==void 0&&(q===null||typeof q!="object"||!("aborted"in q)))throw new _(X,"AbortSignal",q)}),ce=D((q,X)=>{if(typeof q!="function")throw new _(X,"Function",q)}),M=D((q,X)=>{if(typeof q!="function"||N(q))throw new _(X,"Function",q)}),U=D((q,X)=>{if(q!==void 0)throw new _(X,"undefined",q)});function z(q,X,ne){if(!e(ne,q))throw new _(X,`('${t(ne,"|")}')`,q)}const re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function se(q,X){if(typeof q>"u"||!C(re,q))throw new f(X,q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(q){if(typeof q=="string")return se(q,"hints"),q;if(n(q)){const X=q.length;let ne="";if(X===0)return ne;for(let Z=0;Z<X;Z++){const we=q[Z];se(we,"hints"),ne+=we,Z!==X-1&&(ne+=", ")}return ne}throw new f("hints",q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return gr={isInt32:s,isUint32:w,parseFileMode:y,validateArray:H,validateStringArray:ee,validateBooleanArray:Q,validateAbortSignalArray:le,validateBoolean:k,validateBuffer:K,validateDictionary:J,validateEncoding:Y,validateFunction:ce,validateInt32:L,validateInteger:h,validateNumber:P,validateObject:F,validateOneOf:E,validatePlainFunction:M,validatePort:oe,validateSignalName:ue,validateString:A,validateUint32:p,validateUndefined:U,validateUnion:z,validateAbortSignal:fe,validateLinkHeaderValue:ie},gr}var An={exports:{}},pr={exports:{}},Bi;function Lt(){if(Bi)return pr.exports;Bi=1;var n=pr.exports={},e,t;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?t=clearTimeout:t=o}catch{t=o}})();function i(m){if(e===setTimeout)return setTimeout(m,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(m,0);try{return e(m,0)}catch{try{return e.call(null,m,0)}catch{return e.call(this,m,0)}}}function a(m){if(t===clearTimeout)return clearTimeout(m);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(m);try{return t(m)}catch{try{return t.call(null,m)}catch{return t.call(this,m)}}}var u=[],g=!1,b,C=-1;function x(){!g||!b||(g=!1,b.length?u=b.concat(u):C=-1,u.length&&R())}function R(){if(!g){var m=i(x);g=!0;for(var _=u.length;_;){for(b=u,u=[];++C<_;)b&&b[C].run();C=-1,_=u.length}b=null,g=!1,a(m)}}n.nextTick=function(m){var _=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)_[f-1]=arguments[f];u.push(new j(m,_)),u.length===1&&!g&&i(R)};function j(m,_){this.fun=m,this.array=_}j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function D(){}return n.on=D,n.addListener=D,n.once=D,n.off=D,n.removeListener=D,n.removeAllListeners=D,n.emit=D,n.prependListener=D,n.prependOnceListener=D,n.listeners=function(m){return[]},n.binding=function(m){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(m){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},pr.exports}var wr,Di;function dt(){if(Di)return wr;Di=1;const{SymbolAsyncIterator:n,SymbolIterator:e,SymbolFor:t}=Ie(),r=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),i=t("nodejs.stream.readable"),a=t("nodejs.stream.writable"),u=t("nodejs.stream.disturbed"),g=t("nodejs.webstream.isClosedPromise"),b=t("nodejs.webstream.controllerErrorFunction");function C(S,F=!1){var J;return!!(S&&typeof S.pipe=="function"&&typeof S.on=="function"&&(!F||typeof S.pause=="function"&&typeof S.resume=="function")&&(!S._writableState||((J=S._readableState)===null||J===void 0?void 0:J.readable)!==!1)&&(!S._writableState||S._readableState))}function x(S){var F;return!!(S&&typeof S.write=="function"&&typeof S.on=="function"&&(!S._readableState||((F=S._writableState)===null||F===void 0?void 0:F.writable)!==!1))}function R(S){return!!(S&&typeof S.pipe=="function"&&S._readableState&&typeof S.on=="function"&&typeof S.write=="function")}function j(S){return S&&(S._readableState||S._writableState||typeof S.write=="function"&&typeof S.on=="function"||typeof S.pipe=="function"&&typeof S.on=="function")}function D(S){return!!(S&&!j(S)&&typeof S.pipeThrough=="function"&&typeof S.getReader=="function"&&typeof S.cancel=="function")}function m(S){return!!(S&&!j(S)&&typeof S.getWriter=="function"&&typeof S.abort=="function")}function _(S){return!!(S&&!j(S)&&typeof S.readable=="object"&&typeof S.writable=="object")}function f(S){return D(S)||m(S)||_(S)}function c(S,F){return S==null?!1:F===!0?typeof S[n]=="function":F===!1?typeof S[e]=="function":typeof S[n]=="function"||typeof S[e]=="function"}function v(S){if(!j(S))return null;const F=S._writableState,J=S._readableState,H=F||J;return!!(S.destroyed||S[r]||H!=null&&H.destroyed)}function B(S){if(!x(S))return null;if(S.writableEnded===!0)return!0;const F=S._writableState;return F!=null&&F.errored?!1:typeof(F==null?void 0:F.ended)!="boolean"?null:F.ended}function N(S,F){if(!x(S))return null;if(S.writableFinished===!0)return!0;const J=S._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.finished)!="boolean"?null:!!(J.finished||F===!1&&J.ended===!0&&J.length===0)}function $(S){if(!C(S))return null;if(S.readableEnded===!0)return!0;const F=S._readableState;return!F||F.errored?!1:typeof(F==null?void 0:F.ended)!="boolean"?null:F.ended}function G(S,F){if(!C(S))return null;const J=S._readableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.endEmitted)!="boolean"?null:!!(J.endEmitted||F===!1&&J.ended===!0&&J.length===0)}function s(S){return S&&S[i]!=null?S[i]:typeof(S==null?void 0:S.readable)!="boolean"?null:v(S)?!1:C(S)&&S.readable&&!G(S)}function w(S){return S&&S[a]!=null?S[a]:typeof(S==null?void 0:S.writable)!="boolean"?null:v(S)?!1:x(S)&&S.writable&&!B(S)}function l(S,F){return j(S)?v(S)?!0:!((F==null?void 0:F.readable)!==!1&&s(S)||(F==null?void 0:F.writable)!==!1&&w(S)):null}function d(S){var F,J;return j(S)?S.writableErrored?S.writableErrored:(F=(J=S._writableState)===null||J===void 0?void 0:J.errored)!==null&&F!==void 0?F:null:null}function y(S){var F,J;return j(S)?S.readableErrored?S.readableErrored:(F=(J=S._readableState)===null||J===void 0?void 0:J.errored)!==null&&F!==void 0?F:null:null}function h(S){if(!j(S))return null;if(typeof S.closed=="boolean")return S.closed;const F=S._writableState,J=S._readableState;return typeof(F==null?void 0:F.closed)=="boolean"||typeof(J==null?void 0:J.closed)=="boolean"?(F==null?void 0:F.closed)||(J==null?void 0:J.closed):typeof S._closed=="boolean"&&L(S)?S._closed:null}function L(S){return typeof S._closed=="boolean"&&typeof S._defaultKeepAlive=="boolean"&&typeof S._removedConnection=="boolean"&&typeof S._removedContLen=="boolean"}function p(S){return typeof S._sent100=="boolean"&&L(S)}function A(S){var F;return typeof S._consuming=="boolean"&&typeof S._dumped=="boolean"&&((F=S.req)===null||F===void 0?void 0:F.upgradeOrConnect)===void 0}function P(S){if(!j(S))return null;const F=S._writableState,J=S._readableState,H=F||J;return!H&&p(S)||!!(H&&H.autoDestroy&&H.emitClose&&H.closed===!1)}function E(S){var F;return!!(S&&((F=S[u])!==null&&F!==void 0?F:S.readableDidRead||S.readableAborted))}function k(S){var F,J,H,ee,Q,le,ue,K,Y,oe;return!!(S&&((F=(J=(H=(ee=(Q=(le=S[o])!==null&&le!==void 0?le:S.readableErrored)!==null&&Q!==void 0?Q:S.writableErrored)!==null&&ee!==void 0?ee:(ue=S._readableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&H!==void 0?H:(K=S._writableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&J!==void 0?J:(Y=S._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&F!==void 0?F:!((oe=S._writableState)===null||oe===void 0)&&oe.errored))}return wr={isDestroyed:v,kIsDestroyed:r,isDisturbed:E,kIsDisturbed:u,isErrored:k,kIsErrored:o,isReadable:s,kIsReadable:i,kIsClosedPromise:g,kControllerErrorFunction:b,kIsWritable:a,isClosed:h,isDuplexNodeStream:R,isFinished:l,isIterable:c,isReadableNodeStream:C,isReadableStream:D,isReadableEnded:$,isReadableFinished:G,isReadableErrored:y,isNodeStream:j,isWebStream:f,isWritable:w,isWritableNodeStream:x,isWritableStream:m,isWritableEnded:B,isWritableFinished:N,isWritableErrored:d,isServerRequest:A,isServerResponse:p,willEmitClose:P,isTransformStream:_},wr}var ki;function _t(){if(ki)return An.exports;ki=1;const n=Lt(),{AbortError:e,codes:t}=Be(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:i,once:a}=qe(),{validateAbortSignal:u,validateFunction:g,validateObject:b,validateBoolean:C}=rn(),{Promise:x,PromisePrototypeThen:R,SymbolDispose:j}=Ie(),{isClosed:D,isReadable:m,isReadableNodeStream:_,isReadableStream:f,isReadableFinished:c,isReadableErrored:v,isWritable:B,isWritableNodeStream:N,isWritableStream:$,isWritableFinished:G,isWritableErrored:s,isNodeStream:w,willEmitClose:l,kIsClosedPromise:d}=dt();let y;function h(E){return E.setHeader&&typeof E.abort=="function"}const L=()=>{};function p(E,k,S){var F,J;if(arguments.length===2?(S=k,k=i):k==null?k=i:b(k,"options"),g(S,"callback"),u(k.signal,"options.signal"),S=a(S),f(E)||$(E))return A(E,k,S);if(!w(E))throw new r("stream",["ReadableStream","WritableStream","Stream"],E);const H=(F=k.readable)!==null&&F!==void 0?F:_(E),ee=(J=k.writable)!==null&&J!==void 0?J:N(E),Q=E._writableState,le=E._readableState,ue=()=>{E.writable||oe()};let K=l(E)&&_(E)===H&&N(E)===ee,Y=G(E,!1);const oe=()=>{Y=!0,E.destroyed&&(K=!1),!(K&&(!E.readable||H))&&(!H||fe)&&S.call(E)};let fe=c(E,!1);const ce=()=>{fe=!0,E.destroyed&&(K=!1),!(K&&(!E.writable||ee))&&(!ee||Y)&&S.call(E)},M=q=>{S.call(E,q)};let U=D(E);const z=()=>{U=!0;const q=s(E)||v(E);if(q&&typeof q!="boolean")return S.call(E,q);if(H&&!fe&&_(E,!0)&&!c(E,!1))return S.call(E,new o);if(ee&&!Y&&!G(E,!1))return S.call(E,new o);S.call(E)},re=()=>{U=!0;const q=s(E)||v(E);if(q&&typeof q!="boolean")return S.call(E,q);S.call(E)},se=()=>{E.req.on("finish",oe)};h(E)?(E.on("complete",oe),K||E.on("abort",z),E.req?se():E.on("request",se)):ee&&!Q&&(E.on("end",ue),E.on("close",ue)),!K&&typeof E.aborted=="boolean"&&E.on("aborted",z),E.on("end",ce),E.on("finish",oe),k.error!==!1&&E.on("error",M),E.on("close",z),U?n.nextTick(z):Q!=null&&Q.errorEmitted||le!=null&&le.errorEmitted?K||n.nextTick(re):(!H&&(!K||m(E))&&(Y||B(E)===!1)||!ee&&(!K||B(E))&&(fe||m(E)===!1)||le&&E.req&&E.aborted)&&n.nextTick(re);const ie=()=>{S=L,E.removeListener("aborted",z),E.removeListener("complete",oe),E.removeListener("abort",z),E.removeListener("request",se),E.req&&E.req.removeListener("finish",oe),E.removeListener("end",ue),E.removeListener("close",ue),E.removeListener("finish",oe),E.removeListener("end",ce),E.removeListener("error",M),E.removeListener("close",z)};if(k.signal&&!U){const q=()=>{const X=S;ie(),X.call(E,new e(void 0,{cause:k.signal.reason}))};if(k.signal.aborted)n.nextTick(q);else{y=y||qe().addAbortListener;const X=y(k.signal,q),ne=S;S=a((...Z)=>{X[j](),ne.apply(E,Z)})}}return ie}function A(E,k,S){let F=!1,J=L;if(k.signal)if(J=()=>{F=!0,S.call(E,new e(void 0,{cause:k.signal.reason}))},k.signal.aborted)n.nextTick(J);else{y=y||qe().addAbortListener;const ee=y(k.signal,J),Q=S;S=a((...le)=>{ee[j](),Q.apply(E,le)})}const H=(...ee)=>{F||n.nextTick(()=>S.apply(E,ee))};return R(E[d].promise,H,H),L}function P(E,k){var S;let F=!1;return k===null&&(k=i),(S=k)!==null&&S!==void 0&&S.cleanup&&(C(k.cleanup,"cleanup"),F=k.cleanup),new x((J,H)=>{const ee=p(E,k,Q=>{F&&ee(),Q?H(Q):J()})})}return An.exports=p,An.exports.finished=P,An.exports}var br,Ui;function jt(){if(Ui)return br;Ui=1;const n=Lt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:r}=Be(),{Symbol:o}=Ie(),{kIsDestroyed:i,isDestroyed:a,isFinished:u,isServerRequest:g}=dt(),b=o("kDestroy"),C=o("kConstruct");function x(l,d,y){l&&(l.stack,d&&!d.errored&&(d.errored=l),y&&!y.errored&&(y.errored=l))}function R(l,d){const y=this._readableState,h=this._writableState,L=h||y;return h!=null&&h.destroyed||y!=null&&y.destroyed?(typeof d=="function"&&d(),this):(x(l,h,y),h&&(h.destroyed=!0),y&&(y.destroyed=!0),L.constructed?j(this,l,d):this.once(b,function(p){j(this,e(p,l),d)}),this)}function j(l,d,y){let h=!1;function L(p){if(h)return;h=!0;const A=l._readableState,P=l._writableState;x(p,P,A),P&&(P.closed=!0),A&&(A.closed=!0),typeof y=="function"&&y(p),p?n.nextTick(D,l,p):n.nextTick(m,l)}try{l._destroy(d||null,L)}catch(p){L(p)}}function D(l,d){_(l,d),m(l)}function m(l){const d=l._readableState,y=l._writableState;y&&(y.closeEmitted=!0),d&&(d.closeEmitted=!0),(y!=null&&y.emitClose||d!=null&&d.emitClose)&&l.emit("close")}function _(l,d){const y=l._readableState,h=l._writableState;h!=null&&h.errorEmitted||y!=null&&y.errorEmitted||(h&&(h.errorEmitted=!0),y&&(y.errorEmitted=!0),l.emit("error",d))}function f(){const l=this._readableState,d=this._writableState;l&&(l.constructed=!0,l.closed=!1,l.closeEmitted=!1,l.destroyed=!1,l.errored=null,l.errorEmitted=!1,l.reading=!1,l.ended=l.readable===!1,l.endEmitted=l.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function c(l,d,y){const h=l._readableState,L=l._writableState;if(L!=null&&L.destroyed||h!=null&&h.destroyed)return this;h!=null&&h.autoDestroy||L!=null&&L.autoDestroy?l.destroy(d):d&&(d.stack,L&&!L.errored&&(L.errored=d),h&&!h.errored&&(h.errored=d),y?n.nextTick(_,l,d):_(l,d))}function v(l,d){if(typeof l._construct!="function")return;const y=l._readableState,h=l._writableState;y&&(y.constructed=!1),h&&(h.constructed=!1),l.once(C,d),!(l.listenerCount(C)>1)&&n.nextTick(B,l)}function B(l){let d=!1;function y(h){if(d){c(l,h??new t);return}d=!0;const L=l._readableState,p=l._writableState,A=p||L;L&&(L.constructed=!0),p&&(p.constructed=!0),A.destroyed?l.emit(b,h):h?c(l,h,!0):n.nextTick(N,l)}try{l._construct(h=>{n.nextTick(y,h)})}catch(h){n.nextTick(y,h)}}function N(l){l.emit(C)}function $(l){return(l==null?void 0:l.setHeader)&&typeof l.abort=="function"}function G(l){l.emit("close")}function s(l,d){l.emit("error",d),n.nextTick(G,l)}function w(l,d){!l||a(l)||(!d&&!u(l)&&(d=new r),g(l)?(l.socket=null,l.destroy(d)):$(l)?l.abort():$(l.req)?l.req.abort():typeof l.destroy=="function"?l.destroy(d):typeof l.close=="function"?l.close():d?n.nextTick(s,l,d):n.nextTick(G,l),l.destroyed||(l[i]=!0))}return br={construct:v,destroyer:w,destroy:R,undestroy:f,errorOrDestroy:c},br}var yr,ji;function ni(){if(ji)return yr;ji=1;const{ArrayIsArray:n,ObjectSetPrototypeOf:e}=Ie(),{EventEmitter:t}=nn();function r(i){t.call(this,i)}e(r.prototype,t.prototype),e(r,t),r.prototype.pipe=function(i,a){const u=this;function g(m){i.writable&&i.write(m)===!1&&u.pause&&u.pause()}u.on("data",g);function b(){u.readable&&u.resume&&u.resume()}i.on("drain",b),!i._isStdio&&(!a||a.end!==!1)&&(u.on("end",x),u.on("close",R));let C=!1;function x(){C||(C=!0,i.end())}function R(){C||(C=!0,typeof i.destroy=="function"&&i.destroy())}function j(m){D(),t.listenerCount(this,"error")===0&&this.emit("error",m)}o(u,"error",j),o(i,"error",j);function D(){u.removeListener("data",g),i.removeListener("drain",b),u.removeListener("end",x),u.removeListener("close",R),u.removeListener("error",j),i.removeListener("error",j),u.removeListener("end",D),u.removeListener("close",D),i.removeListener("close",D)}return u.on("end",D),u.on("close",D),i.on("close",D),i.emit("pipe",u),i};function o(i,a,u){if(typeof i.prependListener=="function")return i.prependListener(a,u);!i._events||!i._events[a]?i.on(a,u):n(i._events[a])?i._events[a].unshift(u):i._events[a]=[u,i._events[a]]}return yr={Stream:r,prependListener:o},yr}var _r={exports:{}},qi;function kn(){return qi||(qi=1,function(n){const{SymbolDispose:e}=Ie(),{AbortError:t,codes:r}=Be(),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:a}=dt(),u=_t(),{ERR_INVALID_ARG_TYPE:g}=r;let b;const C=(x,R)=>{if(typeof x!="object"||!("aborted"in x))throw new g(R,"AbortSignal",x)};n.exports.addAbortSignal=function(R,j){if(C(R,"signal"),!o(j)&&!i(j))throw new g("stream",["ReadableStream","WritableStream","Stream"],j);return n.exports.addAbortSignalNoValidate(R,j)},n.exports.addAbortSignalNoValidate=function(x,R){if(typeof x!="object"||!("aborted"in x))return R;const j=o(R)?()=>{R.destroy(new t(void 0,{cause:x.reason}))}:()=>{R[a](new t(void 0,{cause:x.reason}))};if(x.aborted)j();else{b=b||qe().addAbortListener;const D=b(x,j);u(R,D[e])}return R}}(_r)),_r.exports}var mr,Wi;function fa(){if(Wi)return mr;Wi=1;const{StringPrototypeSlice:n,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:r}=Ie(),{Buffer:o}=Ct(),{inspect:i}=qe();return mr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const g={data:u,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}unshift(u){const g={data:u,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let g=this.head,b=""+g.data;for(;(g=g.next)!==null;)b+=u+g.data;return b}concat(u){if(this.length===0)return o.alloc(0);const g=o.allocUnsafe(u>>>0);let b=this.head,C=0;for(;b;)t(g,b.data,C),C+=b.data.length,b=b.next;return g}consume(u,g){const b=this.head.data;if(u<b.length){const C=b.slice(0,u);return this.head.data=b.slice(u),C}return u===b.length?this.shift():g?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[e](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let g="",b=this.head,C=0;do{const x=b.data;if(u>x.length)g+=x,u-=x.length;else{u===x.length?(g+=x,++C,b.next?this.head=b.next:this.head=this.tail=null):(g+=n(x,0,u),this.head=b,b.data=n(x,u));break}++C}while((b=b.next)!==null);return this.length-=C,g}_getBuffer(u){const g=o.allocUnsafe(u),b=u;let C=this.head,x=0;do{const R=C.data;if(u>R.length)t(g,R,b-u),u-=R.length;else{u===R.length?(t(g,R,b-u),++x,C.next?this.head=C.next:this.head=this.tail=null):(t(g,new r(R.buffer,R.byteOffset,u),b-u),this.head=C,C.data=R.slice(u));break}++x}while((C=C.next)!==null);return this.length-=x,g}[Symbol.for("nodejs.util.inspect.custom")](u,g){return i(this,{...g,depth:0,customInspect:!1})}},mr}var Er,Fi;function Un(){if(Fi)return Er;Fi=1;const{MathFloor:n,NumberIsInteger:e}=Ie(),{validateInteger:t}=rn(),{ERR_INVALID_ARG_VALUE:r}=Be().codes;let o=16*1024,i=16;function a(C,x,R){return C.highWaterMark!=null?C.highWaterMark:x?C[R]:null}function u(C){return C?i:o}function g(C,x){t(x,"value",0),C?i=x:o=x}function b(C,x,R,j){const D=a(x,j,R);if(D!=null){if(!e(D)||D<0){const m=j?`options.${R}`:"options.highWaterMark";throw new r(m,D)}return n(D)}return u(C.objectMode)}return Er={getHighWaterMark:b,getDefaultHighWaterMark:u,setDefaultHighWaterMark:g},Er}var Sr,$i;function Yo(){if($i)return Sr;$i=1;const n=Lt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:r}=Ie(),{Buffer:o}=Ct(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:a}=Be().codes;function u(g,b,C){let x;if(typeof b=="string"||b instanceof o)return new g({objectMode:!0,...C,read(){this.push(b),this.push(null)}});let R;if(b&&b[t])R=!0,x=b[t]();else if(b&&b[r])R=!1,x=b[r]();else throw new i("iterable",["Iterable"],b);const j=new g({objectMode:!0,highWaterMark:1,...C});let D=!1;j._read=function(){D||(D=!0,_())},j._destroy=function(f,c){e(m(f),()=>n.nextTick(c,f),v=>n.nextTick(c,v||f))};async function m(f){const c=f!=null,v=typeof x.throw=="function";if(c&&v){const{value:B,done:N}=await x.throw(f);if(await B,N)return}if(typeof x.return=="function"){const{value:B}=await x.return();await B}}async function _(){for(;;){try{const{value:f,done:c}=R?await x.next():x.next();if(c)j.push(null);else{const v=f&&typeof f.then=="function"?await f:f;if(v===null)throw D=!1,new a;if(j.push(v))continue;D=!1}}catch(f){j.destroy(f)}break}}return j}return Sr=u,Sr}var vr,Hi;function jn(){if(Hi)return vr;Hi=1;const n=Lt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:r,NumberParseInt:o,ObjectDefineProperties:i,ObjectKeys:a,ObjectSetPrototypeOf:u,Promise:g,SafeSet:b,SymbolAsyncDispose:C,SymbolAsyncIterator:x,Symbol:R}=Ie();vr=Z,Z.ReadableState=ne;const{EventEmitter:j}=nn(),{Stream:D,prependListener:m}=ni(),{Buffer:_}=Ct(),{addAbortSignal:f}=kn(),c=_t();let v=qe().debuglog("stream",I=>{v=I});const B=fa(),N=jt(),{getHighWaterMark:$,getDefaultHighWaterMark:G}=Un(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:l,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:y,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:h},AbortError:L}=Be(),{validateObject:p}=rn(),A=R("kPaused"),{StringDecoder:P}=aa(),E=Yo();u(Z.prototype,D.prototype),u(Z,D);const k=()=>{},{errorOrDestroy:S}=N,F=1,J=2,H=4,ee=8,Q=16,le=32,ue=64,K=128,Y=256,oe=512,fe=1024,ce=2048,M=4096,U=8192,z=16384,re=32768,se=65536,ie=1<<17,q=1<<18;function X(I){return{enumerable:!1,get(){return(this.state&I)!==0},set(O){O?this.state|=I:this.state&=~I}}}i(ne.prototype,{objectMode:X(F),ended:X(J),endEmitted:X(H),reading:X(ee),constructed:X(Q),sync:X(le),needReadable:X(ue),emittedReadable:X(K),readableListening:X(Y),resumeScheduled:X(oe),errorEmitted:X(fe),emitClose:X(ce),autoDestroy:X(M),destroyed:X(U),closed:X(z),closeEmitted:X(re),multiAwaitDrain:X(se),readingMore:X(ie),dataEmitted:X(q)});function ne(I,O,te){typeof te!="boolean"&&(te=O instanceof ct()),this.state=ce|M|Q|le,I&&I.objectMode&&(this.state|=F),te&&I&&I.readableObjectMode&&(this.state|=F),this.highWaterMark=I?$(this,I,"readableHighWaterMark",te):G(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[A]=null,I&&I.emitClose===!1&&(this.state&=-2049),I&&I.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,I&&I.encoding&&(this.decoder=new P(I.encoding),this.encoding=I.encoding)}function Z(I){if(!(this instanceof Z))return new Z(I);const O=this instanceof ct();this._readableState=new ne(I,this,O),I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.construct=="function"&&(this._construct=I.construct),I.signal&&!O&&f(I.signal,this)),D.call(this,I),N.construct(this,()=>{this._readableState.needReadable&&Pe(this,this._readableState)})}Z.prototype.destroy=N.destroy,Z.prototype._undestroy=N.undestroy,Z.prototype._destroy=function(I,O){O(I)},Z.prototype[j.captureRejectionSymbol]=function(I){this.destroy(I)},Z.prototype[C]=function(){let I;return this.destroyed||(I=this.readableEnded?null:new L,this.destroy(I)),new g((O,te)=>c(this,ae=>ae&&ae!==I?te(ae):O(null)))},Z.prototype.push=function(I,O){return we(this,I,O,!1)},Z.prototype.unshift=function(I,O){return we(this,I,O,!0)};function we(I,O,te,ae){v("readableAddChunk",O);const de=I._readableState;let Oe;if((de.state&F)===0&&(typeof O=="string"?(te=te||de.defaultEncoding,de.encoding!==te&&(ae&&de.encoding?O=_.from(O,te).toString(de.encoding):(O=_.from(O,te),te=""))):O instanceof _?te="":D._isUint8Array(O)?(O=D._uint8ArrayToBuffer(O),te=""):O!=null&&(Oe=new w("chunk",["string","Buffer","Uint8Array"],O))),Oe)S(I,Oe);else if(O===null)de.state&=-9,Le(I,de);else if((de.state&F)!==0||O&&O.length>0)if(ae)if((de.state&H)!==0)S(I,new h);else{if(de.destroyed||de.errored)return!1;Ce(I,de,O,!0)}else if(de.ended)S(I,new y);else{if(de.destroyed||de.errored)return!1;de.state&=-9,de.decoder&&!te?(O=de.decoder.write(O),de.objectMode||O.length!==0?Ce(I,de,O,!1):Pe(I,de)):Ce(I,de,O,!1)}else ae||(de.state&=-9,Pe(I,de));return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function Ce(I,O,te,ae){O.flowing&&O.length===0&&!O.sync&&I.listenerCount("data")>0?((O.state&se)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,I.emit("data",te)):(O.length+=O.objectMode?1:te.length,ae?O.buffer.unshift(te):O.buffer.push(te),(O.state&ue)!==0&&Ye(I)),Pe(I,O)}Z.prototype.isPaused=function(){const I=this._readableState;return I[A]===!0||I.flowing===!1},Z.prototype.setEncoding=function(I){const O=new P(I);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const te=this._readableState.buffer;let ae="";for(const de of te)ae+=O.write(de);return te.clear(),ae!==""&&te.push(ae),this._readableState.length=ae.length,this};const ye=1073741824;function Me(I){if(I>ye)throw new d("size","<= 1GiB",I);return I--,I|=I>>>1,I|=I>>>2,I|=I>>>4,I|=I>>>8,I|=I>>>16,I++,I}function xe(I,O){return I<=0||O.length===0&&O.ended?0:(O.state&F)!==0?1:r(I)?O.flowing&&O.length?O.buffer.first().length:O.length:I<=O.length?I:O.ended?O.length:0}Z.prototype.read=function(I){v("read",I),I===void 0?I=NaN:t(I)||(I=o(I,10));const O=this._readableState,te=I;if(I>O.highWaterMark&&(O.highWaterMark=Me(I)),I!==0&&(O.state&=-129),I===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return v("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?Wt(this):Ye(this),null;if(I=xe(I,O),I===0&&O.ended)return O.length===0&&Wt(this),null;let ae=(O.state&ue)!==0;if(v("need readable",ae),(O.length===0||O.length-I<O.highWaterMark)&&(ae=!0,v("length less than watermark",ae)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)ae=!1,v("reading, ended or constructing",ae);else if(ae){v("do read"),O.state|=ee|le,O.length===0&&(O.state|=ue);try{this._read(O.highWaterMark)}catch(Oe){S(this,Oe)}O.state&=-33,O.reading||(I=xe(te,O))}let de;return I>0?de=ht(I,O):de=null,de===null?(O.needReadable=O.length<=O.highWaterMark,I=0):(O.length-=I,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),te!==I&&O.ended&&Wt(this)),de!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",de)),de};function Le(I,O){if(v("onEofChunk"),!O.ended){if(O.decoder){const te=O.decoder.end();te&&te.length&&(O.buffer.push(te),O.length+=O.objectMode?1:te.length)}O.ended=!0,O.sync?Ye(I):(O.needReadable=!1,O.emittedReadable=!0,mt(I))}}function Ye(I){const O=I._readableState;v("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(v("emitReadable",O.flowing),O.emittedReadable=!0,n.nextTick(mt,I))}function mt(I){const O=I._readableState;v("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(I.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,qt(I)}function Pe(I,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,n.nextTick(ln,I,O))}function ln(I,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const te=O.length;if(v("maybeReadMore read 0"),I.read(0),te===O.length)break}O.readingMore=!1}Z.prototype._read=function(I){throw new l("_read()")},Z.prototype.pipe=function(I,O){const te=this,ae=this._readableState;ae.pipes.length===1&&(ae.multiAwaitDrain||(ae.multiAwaitDrain=!0,ae.awaitDrainWriters=new b(ae.awaitDrainWriters?[ae.awaitDrainWriters]:[]))),ae.pipes.push(I),v("pipe count=%d opts=%j",ae.pipes.length,O);const Oe=(!O||O.end!==!1)&&I!==n.stdout&&I!==n.stderr?hn:Et;ae.endEmitted?n.nextTick(Oe):te.once("end",Oe),I.on("unpipe",De);function De(ot,Je){v("onunpipe"),ot===te&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,Jn())}function hn(){v("onend"),I.end()}let ke,gn=!1;function Jn(){v("cleanup"),I.removeListener("close",et),I.removeListener("finish",Ht),ke&&I.removeListener("drain",ke),I.removeListener("error",$t),I.removeListener("unpipe",De),te.removeListener("end",hn),te.removeListener("end",Et),te.removeListener("data",wn),gn=!0,ke&&ae.awaitDrainWriters&&(!I._writableState||I._writableState.needDrain)&&ke()}function pn(){gn||(ae.pipes.length===1&&ae.pipes[0]===I?(v("false write response, pause",0),ae.awaitDrainWriters=I,ae.multiAwaitDrain=!1):ae.pipes.length>1&&ae.pipes.includes(I)&&(v("false write response, pause",ae.awaitDrainWriters.size),ae.awaitDrainWriters.add(I)),te.pause()),ke||(ke=Vn(te,I),I.on("drain",ke))}te.on("data",wn);function wn(ot){v("ondata");const Je=I.write(ot);v("dest.write",Je),Je===!1&&pn()}function $t(ot){if(v("onerror",ot),Et(),I.removeListener("error",$t),I.listenerCount("error")===0){const Je=I._writableState||I._readableState;Je&&!Je.errorEmitted?S(I,ot):I.emit("error",ot)}}m(I,"error",$t);function et(){I.removeListener("finish",Ht),Et()}I.once("close",et);function Ht(){v("onfinish"),I.removeListener("close",et),Et()}I.once("finish",Ht);function Et(){v("unpipe"),te.unpipe(I)}return I.emit("pipe",te),I.writableNeedDrain===!0?pn():ae.flowing||(v("pipe resume"),te.resume()),I};function Vn(I,O){return function(){const ae=I._readableState;ae.awaitDrainWriters===O?(v("pipeOnDrain",1),ae.awaitDrainWriters=null):ae.multiAwaitDrain&&(v("pipeOnDrain",ae.awaitDrainWriters.size),ae.awaitDrainWriters.delete(O)),(!ae.awaitDrainWriters||ae.awaitDrainWriters.size===0)&&I.listenerCount("data")&&I.resume()}}Z.prototype.unpipe=function(I){const O=this._readableState,te={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!I){const de=O.pipes;O.pipes=[],this.pause();for(let Oe=0;Oe<de.length;Oe++)de[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const ae=e(O.pipes,I);return ae===-1?this:(O.pipes.splice(ae,1),O.pipes.length===0&&this.pause(),I.emit("unpipe",this,te),this)},Z.prototype.on=function(I,O){const te=D.prototype.on.call(this,I,O),ae=this._readableState;return I==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):I==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,v("on readable",ae.length,ae.reading),ae.length?Ye(this):ae.reading||n.nextTick(rt,this)),te},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(I,O){const te=D.prototype.removeListener.call(this,I,O);return I==="readable"&&n.nextTick(un,this),te},Z.prototype.off=Z.prototype.removeListener,Z.prototype.removeAllListeners=function(I){const O=D.prototype.removeAllListeners.apply(this,arguments);return(I==="readable"||I===void 0)&&n.nextTick(un,this),O};function un(I){const O=I._readableState;O.readableListening=I.listenerCount("readable")>0,O.resumeScheduled&&O[A]===!1?O.flowing=!0:I.listenerCount("data")>0?I.resume():O.readableListening||(O.flowing=null)}function rt(I){v("readable nexttick read 0"),I.read(0)}Z.prototype.resume=function(){const I=this._readableState;return I.flowing||(v("resume"),I.flowing=!I.readableListening,Pt(this,I)),I[A]=!1,this};function Pt(I,O){O.resumeScheduled||(O.resumeScheduled=!0,n.nextTick(Kn,I,O))}function Kn(I,O){v("resume",O.reading),O.reading||I.read(0),O.resumeScheduled=!1,I.emit("resume"),qt(I),O.flowing&&!O.reading&&I.read(0)}Z.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[A]=!0,this};function qt(I){const O=I._readableState;for(v("flow",O.flowing);O.flowing&&I.read()!==null;);}Z.prototype.wrap=function(I){let O=!1;I.on("data",ae=>{!this.push(ae)&&I.pause&&(O=!0,I.pause())}),I.on("end",()=>{this.push(null)}),I.on("error",ae=>{S(this,ae)}),I.on("close",()=>{this.destroy()}),I.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&I.resume&&(O=!1,I.resume())};const te=a(I);for(let ae=1;ae<te.length;ae++){const de=te[ae];this[de]===void 0&&typeof I[de]=="function"&&(this[de]=I[de].bind(I))}return this},Z.prototype[x]=function(){return fn(this)},Z.prototype.iterator=function(I){return I!==void 0&&p(I,"options"),fn(this,I)};function fn(I,O){typeof I.read!="function"&&(I=Z.wrap(I,{objectMode:!0}));const te=cn(I,O);return te.stream=I,te}async function*cn(I,O){let te=k;function ae(De){this===I?(te(),te=k):te=De}I.on("readable",ae);let de;const Oe=c(I,{writable:!1},De=>{de=De?s(de,De):null,te(),te=k});try{for(;;){const De=I.destroyed?null:I.read();if(De!==null)yield De;else{if(de)throw de;if(de===null)return;await new g(ae)}}}catch(De){throw de=s(de,De),de}finally{(de||(O==null?void 0:O.destroyOnReturn)!==!1)&&(de===void 0||I._readableState.autoDestroy)?N.destroyer(I,null):(I.off("readable",ae),Oe())}}i(Z.prototype,{readable:{__proto__:null,get(){const I=this._readableState;return!!I&&I.readable!==!1&&!I.destroyed&&!I.errorEmitted&&!I.endEmitted},set(I){this._readableState&&(this._readableState.readable=!!I)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(I){this._readableState&&(this._readableState.flowing=I)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(I){this._readableState&&(this._readableState.destroyed=I)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(ne.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[A]!==!1},set(I){this[A]=!!I}}}),Z._fromList=ht;function ht(I,O){if(O.length===0)return null;let te;return O.objectMode?te=O.buffer.shift():!I||I>=O.length?(O.decoder?te=O.buffer.join(""):O.buffer.length===1?te=O.buffer.first():te=O.buffer.concat(O.length),O.buffer.clear()):te=O.buffer.consume(I,O.decoder),te}function Wt(I){const O=I._readableState;v("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,n.nextTick(it,O,I))}function it(I,O){if(v("endReadableNT",I.endEmitted,I.length),!I.errored&&!I.closeEmitted&&!I.endEmitted&&I.length===0){if(I.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)n.nextTick(Yn,O);else if(I.autoDestroy){const te=O._writableState;(!te||te.autoDestroy&&(te.finished||te.writable===!1))&&O.destroy()}}}function Yn(I){I.writable&&!I.writableEnded&&!I.destroyed&&I.end()}Z.from=function(I,O){return E(Z,I,O)};let Ft;function dn(){return Ft===void 0&&(Ft={}),Ft}return Z.fromWeb=function(I,O){return dn().newStreamReadableFromReadableStream(I,O)},Z.toWeb=function(I,O){return dn().newReadableStreamFromStreamReadable(I,O)},Z.wrap=function(I,O){var te,ae;return new Z({objectMode:(te=(ae=I.readableObjectMode)!==null&&ae!==void 0?ae:I.objectMode)!==null&&te!==void 0?te:!0,...O,destroy(de,Oe){N.destroyer(I,de),Oe(de)}}).wrap(I)},vr}var Ar,zi;function ri(){if(zi)return Ar;zi=1;const n=Lt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:o,ObjectDefineProperties:i,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:u,Symbol:g,SymbolHasInstance:b}=Ie();Ar=p,p.WritableState=h;const{EventEmitter:C}=nn(),x=ni().Stream,{Buffer:R}=Ct(),j=jt(),{addAbortSignal:D}=kn(),{getHighWaterMark:m,getDefaultHighWaterMark:_}=Un(),{ERR_INVALID_ARG_TYPE:f,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:N,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:G,ERR_STREAM_WRITE_AFTER_END:s,ERR_UNKNOWN_ENCODING:w}=Be().codes,{errorOrDestroy:l}=j;a(p.prototype,x.prototype),a(p,x);function d(){}const y=g("kOnFinished");function h(M,U,z){typeof z!="boolean"&&(z=U instanceof ct()),this.objectMode=!!(M&&M.objectMode),z&&(this.objectMode=this.objectMode||!!(M&&M.writableObjectMode)),this.highWaterMark=M?m(this,M,"writableHighWaterMark",z):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const re=!!(M&&M.decodeStrings===!1);this.decodeStrings=!re,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=S.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!M||M.emitClose!==!1,this.autoDestroy=!M||M.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[y]=[]}function L(M){M.buffered=[],M.bufferedIndex=0,M.allBuffers=!0,M.allNoop=!0}h.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(h.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function p(M){const U=this instanceof ct();if(!U&&!r(p,this))return new p(M);this._writableState=new h(M,this,U),M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&D(M.signal,this)),x.call(this,M),j.construct(this,()=>{const z=this._writableState;z.writing||ee(this,z),K(this,z)})}o(p,b,{__proto__:null,value:function(M){return r(this,M)?!0:this!==p?!1:M&&M._writableState instanceof h}}),p.prototype.pipe=function(){l(this,new B)};function A(M,U,z,re){const se=M._writableState;if(typeof z=="function")re=z,z=se.defaultEncoding;else{if(!z)z=se.defaultEncoding;else if(z!=="buffer"&&!R.isEncoding(z))throw new w(z);typeof re!="function"&&(re=d)}if(U===null)throw new G;if(!se.objectMode)if(typeof U=="string")se.decodeStrings!==!1&&(U=R.from(U,z),z="buffer");else if(U instanceof R)z="buffer";else if(x._isUint8Array(U))U=x._uint8ArrayToBuffer(U),z="buffer";else throw new f("chunk",["string","Buffer","Uint8Array"],U);let ie;return se.ending?ie=new s:se.destroyed&&(ie=new N("write")),ie?(n.nextTick(re,ie),l(M,ie,!0),ie):(se.pendingcb++,P(M,se,U,z,re))}p.prototype.write=function(M,U,z){return A(this,M,U,z)===!0},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){const M=this._writableState;M.corked&&(M.corked--,M.writing||ee(this,M))},p.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=u(U)),!R.isEncoding(U))throw new w(U);return this._writableState.defaultEncoding=U,this};function P(M,U,z,re,se){const ie=U.objectMode?1:z.length;U.length+=ie;const q=U.length<U.highWaterMark;return q||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:z,encoding:re,callback:se}),U.allBuffers&&re!=="buffer"&&(U.allBuffers=!1),U.allNoop&&se!==d&&(U.allNoop=!1)):(U.writelen=ie,U.writecb=se,U.writing=!0,U.sync=!0,M._write(z,re,U.onwrite),U.sync=!1),q&&!U.errored&&!U.destroyed}function E(M,U,z,re,se,ie,q){U.writelen=re,U.writecb=q,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new N("write")):z?M._writev(se,U.onwrite):M._write(se,ie,U.onwrite),U.sync=!1}function k(M,U,z,re){--U.pendingcb,re(z),H(U),l(M,z)}function S(M,U){const z=M._writableState,re=z.sync,se=z.writecb;if(typeof se!="function"){l(M,new v);return}z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0,U?(U.stack,z.errored||(z.errored=U),M._readableState&&!M._readableState.errored&&(M._readableState.errored=U),re?n.nextTick(k,M,z,U,se):k(M,z,U,se)):(z.buffered.length>z.bufferedIndex&&ee(M,z),re?z.afterWriteTickInfo!==null&&z.afterWriteTickInfo.cb===se?z.afterWriteTickInfo.count++:(z.afterWriteTickInfo={count:1,cb:se,stream:M,state:z},n.nextTick(F,z.afterWriteTickInfo)):J(M,z,1,se))}function F({stream:M,state:U,count:z,cb:re}){return U.afterWriteTickInfo=null,J(M,U,z,re)}function J(M,U,z,re){for(!U.ending&&!M.destroyed&&U.length===0&&U.needDrain&&(U.needDrain=!1,M.emit("drain"));z-- >0;)U.pendingcb--,re();U.destroyed&&H(U),K(M,U)}function H(M){if(M.writing)return;for(let se=M.bufferedIndex;se<M.buffered.length;++se){var U;const{chunk:ie,callback:q}=M.buffered[se],X=M.objectMode?1:ie.length;M.length-=X,q((U=M.errored)!==null&&U!==void 0?U:new N("write"))}const z=M[y].splice(0);for(let se=0;se<z.length;se++){var re;z[se]((re=M.errored)!==null&&re!==void 0?re:new N("end"))}L(M)}function ee(M,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;const{buffered:z,bufferedIndex:re,objectMode:se}=U,ie=z.length-re;if(!ie)return;let q=re;if(U.bufferProcessing=!0,ie>1&&M._writev){U.pendingcb-=ie-1;const X=U.allNoop?d:Z=>{for(let we=q;we<z.length;++we)z[we].callback(Z)},ne=U.allNoop&&q===0?z:e(z,q);ne.allBuffers=U.allBuffers,E(M,U,!0,U.length,ne,"",X),L(U)}else{do{const{chunk:X,encoding:ne,callback:Z}=z[q];z[q++]=null;const we=se?1:X.length;E(M,U,!1,we,X,ne,Z)}while(q<z.length&&!U.writing);q===z.length?L(U):q>256?(z.splice(0,q),U.bufferedIndex=0):U.bufferedIndex=q}U.bufferProcessing=!1}p.prototype._write=function(M,U,z){if(this._writev)this._writev([{chunk:M,encoding:U}],z);else throw new c("_write()")},p.prototype._writev=null,p.prototype.end=function(M,U,z){const re=this._writableState;typeof M=="function"?(z=M,M=null,U=null):typeof U=="function"&&(z=U,U=null);let se;if(M!=null){const ie=A(this,M,U);ie instanceof t&&(se=ie)}return re.corked&&(re.corked=1,this.uncork()),se||(!re.errored&&!re.ending?(re.ending=!0,K(this,re,!0),re.ended=!0):re.finished?se=new $("end"):re.destroyed&&(se=new N("end"))),typeof z=="function"&&(se||re.finished?n.nextTick(z,se):re[y].push(z)),this};function Q(M){return M.ending&&!M.destroyed&&M.constructed&&M.length===0&&!M.errored&&M.buffered.length===0&&!M.finished&&!M.writing&&!M.errorEmitted&&!M.closeEmitted}function le(M,U){let z=!1;function re(se){if(z){l(M,se??v());return}if(z=!0,U.pendingcb--,se){const ie=U[y].splice(0);for(let q=0;q<ie.length;q++)ie[q](se);l(M,se,U.sync)}else Q(U)&&(U.prefinished=!0,M.emit("prefinish"),U.pendingcb++,n.nextTick(Y,M,U))}U.sync=!0,U.pendingcb++;try{M._final(re)}catch(se){re(se)}U.sync=!1}function ue(M,U){!U.prefinished&&!U.finalCalled&&(typeof M._final=="function"&&!U.destroyed?(U.finalCalled=!0,le(M,U)):(U.prefinished=!0,M.emit("prefinish")))}function K(M,U,z){Q(U)&&(ue(M,U),U.pendingcb===0&&(z?(U.pendingcb++,n.nextTick((re,se)=>{Q(se)?Y(re,se):se.pendingcb--},M,U)):Q(U)&&(U.pendingcb++,Y(M,U))))}function Y(M,U){U.pendingcb--,U.finished=!0;const z=U[y].splice(0);for(let re=0;re<z.length;re++)z[re]();if(M.emit("finish"),U.autoDestroy){const re=M._readableState;(!re||re.autoDestroy&&(re.endEmitted||re.readable===!1))&&M.destroy()}}i(p.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(M){this._writableState&&(this._writableState.destroyed=M)}},writable:{__proto__:null,get(){const M=this._writableState;return!!M&&M.writable!==!1&&!M.destroyed&&!M.errored&&!M.ending&&!M.ended},set(M){this._writableState&&(this._writableState.writable=!!M)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const M=this._writableState;return M?!M.destroyed&&!M.ending&&M.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=j.destroy;p.prototype.destroy=function(M,U){const z=this._writableState;return!z.destroyed&&(z.bufferedIndex<z.buffered.length||z[y].length)&&n.nextTick(H,z),oe.call(this,M,U),this},p.prototype._undestroy=j.undestroy,p.prototype._destroy=function(M,U){U(M)},p.prototype[C.captureRejectionSymbol]=function(M){this.destroy(M)};let fe;function ce(){return fe===void 0&&(fe={}),fe}return p.fromWeb=function(M,U){return ce().newStreamWritableFromWritableStream(M,U)},p.toWeb=function(M){return ce().newWritableStreamFromStreamWritable(M)},Ar}var Rr,Gi;function ca(){if(Gi)return Rr;Gi=1;const n=Lt(),e=Ct(),{isReadable:t,isWritable:r,isIterable:o,isNodeStream:i,isReadableNodeStream:a,isWritableNodeStream:u,isDuplexNodeStream:g,isReadableStream:b,isWritableStream:C}=dt(),x=_t(),{AbortError:R,codes:{ERR_INVALID_ARG_TYPE:j,ERR_INVALID_RETURN_VALUE:D}}=Be(),{destroyer:m}=jt(),_=ct(),f=jn(),c=ri(),{createDeferredPromise:v}=qe(),B=Yo(),N=globalThis.Blob||e.Blob,$=typeof N<"u"?function(h){return h instanceof N}:function(h){return!1},G=globalThis.AbortController||en().AbortController,{FunctionPrototypeCall:s}=Ie();class w extends _{constructor(h){super(h),(h==null?void 0:h.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(h==null?void 0:h.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Rr=function y(h,L){if(g(h))return h;if(a(h))return d({readable:h});if(u(h))return d({writable:h});if(i(h))return d({writable:!1,readable:!1});if(b(h))return d({readable:f.fromWeb(h)});if(C(h))return d({writable:c.fromWeb(h)});if(typeof h=="function"){const{value:A,write:P,final:E,destroy:k}=l(h);if(o(A))return B(w,A,{objectMode:!0,write:P,final:E,destroy:k});const S=A==null?void 0:A.then;if(typeof S=="function"){let F;const J=s(S,A,H=>{if(H!=null)throw new D("nully","body",H)},H=>{m(F,H)});return F=new w({objectMode:!0,readable:!1,write:P,final(H){E(async()=>{try{await J,n.nextTick(H,null)}catch(ee){n.nextTick(H,ee)}})},destroy:k})}throw new D("Iterable, AsyncIterable or AsyncFunction",L,A)}if($(h))return y(h.arrayBuffer());if(o(h))return B(w,h,{objectMode:!0,writable:!1});if(b(h==null?void 0:h.readable)&&C(h==null?void 0:h.writable))return w.fromWeb(h);if(typeof(h==null?void 0:h.writable)=="object"||typeof(h==null?void 0:h.readable)=="object"){const A=h!=null&&h.readable?a(h==null?void 0:h.readable)?h==null?void 0:h.readable:y(h.readable):void 0,P=h!=null&&h.writable?u(h==null?void 0:h.writable)?h==null?void 0:h.writable:y(h.writable):void 0;return d({readable:A,writable:P})}const p=h==null?void 0:h.then;if(typeof p=="function"){let A;return s(p,h,P=>{P!=null&&A.push(P),A.push(null)},P=>{m(A,P)}),A=new w({objectMode:!0,writable:!1,read(){}})}throw new j(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],h)};function l(y){let{promise:h,resolve:L}=v();const p=new G,A=p.signal;return{value:y(async function*(){for(;;){const E=h;h=null;const{chunk:k,done:S,cb:F}=await E;if(n.nextTick(F),S)return;if(A.aborted)throw new R(void 0,{cause:A.reason});({promise:h,resolve:L}=v()),yield k}}(),{signal:A}),write(E,k,S){const F=L;L=null,F({chunk:E,done:!1,cb:S})},final(E){const k=L;L=null,k({done:!0,cb:E})},destroy(E,k){p.abort(),k(E)}}}function d(y){const h=y.readable&&typeof y.readable.read!="function"?f.wrap(y.readable):y.readable,L=y.writable;let p=!!t(h),A=!!r(L),P,E,k,S,F;function J(H){const ee=S;S=null,ee?ee(H):H&&F.destroy(H)}return F=new w({readableObjectMode:!!(h!=null&&h.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:p,writable:A}),A&&(x(L,H=>{A=!1,H&&m(h,H),J(H)}),F._write=function(H,ee,Q){L.write(H,ee)?Q():P=Q},F._final=function(H){L.end(),E=H},L.on("drain",function(){if(P){const H=P;P=null,H()}}),L.on("finish",function(){if(E){const H=E;E=null,H()}})),p&&(x(h,H=>{p=!1,H&&m(h,H),J(H)}),h.on("readable",function(){if(k){const H=k;k=null,H()}}),h.on("end",function(){F.push(null)}),F._read=function(){for(;;){const H=h.read();if(H===null){k=F._read;return}if(!F.push(H))return}}),F._destroy=function(H,ee){!H&&S!==null&&(H=new R),k=null,P=null,E=null,S===null?ee(H):(S=ee,m(L,H),m(h,H))},F}return Rr}var Ir,Vi;function ct(){if(Vi)return Ir;Vi=1;const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:r}=Ie();Ir=a;const o=jn(),i=ri();r(a.prototype,o.prototype),r(a,o);{const C=t(i.prototype);for(let x=0;x<C.length;x++){const R=C[x];a.prototype[R]||(a.prototype[R]=i.prototype[R])}}function a(C){if(!(this instanceof a))return new a(C);o.call(this,C),i.call(this,C),C?(this.allowHalfOpen=C.allowHalfOpen!==!1,C.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),C.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(a.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(C){this._readableState&&this._writableState&&(this._readableState.destroyed=C,this._writableState.destroyed=C)}}});let u;function g(){return u===void 0&&(u={}),u}a.fromWeb=function(C,x){return g().newStreamDuplexFromReadableWritablePair(C,x)},a.toWeb=function(C){return g().newReadableWritablePairFromDuplex(C)};let b;return a.from=function(C){return b||(b=ca()),b(C,"body")},Ir}var Tr,Ki;function Jo(){if(Ki)return Tr;Ki=1;const{ObjectSetPrototypeOf:n,Symbol:e}=Ie();Tr=a;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Be().codes,r=ct(),{getHighWaterMark:o}=Un();n(a.prototype,r.prototype),n(a,r);const i=e("kCallback");function a(b){if(!(this instanceof a))return new a(b);const C=b?o(this,b,"readableHighWaterMark",!0):null;C===0&&(b={...b,highWaterMark:null,readableHighWaterMark:C,writableHighWaterMark:b.writableHighWaterMark||0}),r.call(this,b),this._readableState.sync=!1,this[i]=null,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",g)}function u(b){typeof this._flush=="function"&&!this.destroyed?this._flush((C,x)=>{if(C){b?b(C):this.destroy(C);return}x!=null&&this.push(x),this.push(null),b&&b()}):(this.push(null),b&&b())}function g(){this._final!==u&&u.call(this)}return a.prototype._final=u,a.prototype._transform=function(b,C,x){throw new t("_transform()")},a.prototype._write=function(b,C,x){const R=this._readableState,j=this._writableState,D=R.length;this._transform(b,C,(m,_)=>{if(m){x(m);return}_!=null&&this.push(_),j.ended||D===R.length||R.length<R.highWaterMark?x():this[i]=x})},a.prototype._read=function(){if(this[i]){const b=this[i];this[i]=null,b()}},Tr}var xr,Yi;function Zo(){if(Yi)return xr;Yi=1;const{ObjectSetPrototypeOf:n}=Ie();xr=t;const e=Jo();n(t.prototype,e.prototype),n(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,o,i){i(null,r)},xr}var Or,Ji;function ii(){if(Ji)return Or;Ji=1;const n=Lt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:r,SymbolDispose:o}=Ie(),i=_t(),{once:a}=qe(),u=jt(),g=ct(),{aggregateTwoErrors:b,codes:{ERR_INVALID_ARG_TYPE:C,ERR_INVALID_RETURN_VALUE:x,ERR_MISSING_ARGS:R,ERR_STREAM_DESTROYED:j,ERR_STREAM_PREMATURE_CLOSE:D},AbortError:m}=Be(),{validateFunction:_,validateAbortSignal:f}=rn(),{isIterable:c,isReadable:v,isReadableNodeStream:B,isNodeStream:N,isTransformStream:$,isWebStream:G,isReadableStream:s,isReadableFinished:w}=dt(),l=globalThis.AbortController||en().AbortController;let d,y,h;function L(H,ee,Q){let le=!1;H.on("close",()=>{le=!0});const ue=i(H,{readable:ee,writable:Q},K=>{le=!K});return{destroy:K=>{le||(le=!0,u.destroyer(H,K||new j("pipe")))},cleanup:ue}}function p(H){return _(H[H.length-1],"streams[stream.length - 1]"),H.pop()}function A(H){if(c(H))return H;if(B(H))return P(H);throw new C("val",["Readable","Iterable","AsyncIterable"],H)}async function*P(H){y||(y=jn()),yield*y.prototype[r].call(H)}async function E(H,ee,Q,{end:le}){let ue,K=null;const Y=ce=>{if(ce&&(ue=ce),K){const M=K;K=null,M()}},oe=()=>new t((ce,M)=>{ue?M(ue):K=()=>{ue?M(ue):ce()}});ee.on("drain",Y);const fe=i(ee,{readable:!1},Y);try{ee.writableNeedDrain&&await oe();for await(const ce of H)ee.write(ce)||await oe();le&&(ee.end(),await oe()),Q()}catch(ce){Q(ue!==ce?b(ue,ce):ce)}finally{fe(),ee.off("drain",Y)}}async function k(H,ee,Q,{end:le}){$(ee)&&(ee=ee.writable);const ue=ee.getWriter();try{for await(const K of H)await ue.ready,ue.write(K).catch(()=>{});await ue.ready,le&&await ue.close(),Q()}catch(K){try{await ue.abort(K),Q(K)}catch(Y){Q(Y)}}}function S(...H){return F(H,a(p(H)))}function F(H,ee,Q){if(H.length===1&&e(H[0])&&(H=H[0]),H.length<2)throw new R("streams");const le=new l,ue=le.signal,K=Q==null?void 0:Q.signal,Y=[];f(K,"options.signal");function oe(){se(new m)}h=h||qe().addAbortListener;let fe;K&&(fe=h(K,oe));let ce,M;const U=[];let z=0;function re(ne){se(ne,--z===0)}function se(ne,Z){var we;if(ne&&(!ce||ce.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ce=ne),!(!ce&&!Z)){for(;U.length;)U.shift()(ce);(we=fe)===null||we===void 0||we[o](),le.abort(),Z&&(ce||Y.forEach(Ce=>Ce()),n.nextTick(ee,ce,M))}}let ie;for(let ne=0;ne<H.length;ne++){const Z=H[ne],we=ne<H.length-1,Ce=ne>0,ye=we||(Q==null?void 0:Q.end)!==!1,Me=ne===H.length-1;if(N(Z)){let xe=function(Le){Le&&Le.name!=="AbortError"&&Le.code!=="ERR_STREAM_PREMATURE_CLOSE"&&re(Le)};if(ye){const{destroy:Le,cleanup:Ye}=L(Z,we,Ce);U.push(Le),v(Z)&&Me&&Y.push(Ye)}Z.on("error",xe),v(Z)&&Me&&Y.push(()=>{Z.removeListener("error",xe)})}if(ne===0)if(typeof Z=="function"){if(ie=Z({signal:ue}),!c(ie))throw new x("Iterable, AsyncIterable or Stream","source",ie)}else c(Z)||B(Z)||$(Z)?ie=Z:ie=g.from(Z);else if(typeof Z=="function"){if($(ie)){var q;ie=A((q=ie)===null||q===void 0?void 0:q.readable)}else ie=A(ie);if(ie=Z(ie,{signal:ue}),we){if(!c(ie,!0))throw new x("AsyncIterable",`transform[${ne-1}]`,ie)}else{var X;d||(d=Zo());const xe=new d({objectMode:!0}),Le=(X=ie)===null||X===void 0?void 0:X.then;if(typeof Le=="function")z++,Le.call(ie,Pe=>{M=Pe,Pe!=null&&xe.write(Pe),ye&&xe.end(),n.nextTick(re)},Pe=>{xe.destroy(Pe),n.nextTick(re,Pe)});else if(c(ie,!0))z++,E(ie,xe,re,{end:ye});else if(s(ie)||$(ie)){const Pe=ie.readable||ie;z++,E(Pe,xe,re,{end:ye})}else throw new x("AsyncIterable or Promise","destination",ie);ie=xe;const{destroy:Ye,cleanup:mt}=L(ie,!1,!0);U.push(Ye),Me&&Y.push(mt)}}else if(N(Z)){if(B(ie)){z+=2;const xe=J(ie,Z,re,{end:ye});v(Z)&&Me&&Y.push(xe)}else if($(ie)||s(ie)){const xe=ie.readable||ie;z++,E(xe,Z,re,{end:ye})}else if(c(ie))z++,E(ie,Z,re,{end:ye});else throw new C("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Z}else if(G(Z)){if(B(ie))z++,k(A(ie),Z,re,{end:ye});else if(s(ie)||c(ie))z++,k(ie,Z,re,{end:ye});else if($(ie))z++,k(ie.readable,Z,re,{end:ye});else throw new C("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Z}else ie=g.from(Z)}return(ue!=null&&ue.aborted||K!=null&&K.aborted)&&n.nextTick(oe),ie}function J(H,ee,Q,{end:le}){let ue=!1;if(ee.on("close",()=>{ue||Q(new D)}),H.pipe(ee,{end:!1}),le){let K=function(){ue=!0,ee.end()};w(H)?n.nextTick(K):H.once("end",K)}else Q();return i(H,{readable:!0,writable:!1},K=>{const Y=H._readableState;K&&K.code==="ERR_STREAM_PREMATURE_CLOSE"&&Y&&Y.ended&&!Y.errored&&!Y.errorEmitted?H.once("end",Q).once("error",Q):Q(K)}),i(ee,{readable:!1,writable:!0},Q)}return Or={pipelineImpl:F,pipeline:S},Or}var Nr,Zi;function Xo(){if(Zi)return Nr;Zi=1;const{pipeline:n}=ii(),e=ct(),{destroyer:t}=jt(),{isNodeStream:r,isReadable:o,isWritable:i,isWebStream:a,isTransformStream:u,isWritableStream:g,isReadableStream:b}=dt(),{AbortError:C,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:R}}=Be(),j=_t();return Nr=function(...m){if(m.length===0)throw new R("streams");if(m.length===1)return e.from(m[0]);const _=[...m];if(typeof m[0]=="function"&&(m[0]=e.from(m[0])),typeof m[m.length-1]=="function"){const d=m.length-1;m[d]=e.from(m[d])}for(let d=0;d<m.length;++d)if(!(!r(m[d])&&!a(m[d]))){if(d<m.length-1&&!(o(m[d])||b(m[d])||u(m[d])))throw new x(`streams[${d}]`,_[d],"must be readable");if(d>0&&!(i(m[d])||g(m[d])||u(m[d])))throw new x(`streams[${d}]`,_[d],"must be writable")}let f,c,v,B,N;function $(d){const y=B;B=null,y?y(d):d?N.destroy(d):!l&&!w&&N.destroy()}const G=m[0],s=n(m,$),w=!!(i(G)||g(G)||u(G)),l=!!(o(s)||b(s)||u(s));if(N=new e({writableObjectMode:!!(G!=null&&G.writableObjectMode),readableObjectMode:!!(s!=null&&s.readableObjectMode),writable:w,readable:l}),w){if(r(G))N._write=function(y,h,L){G.write(y,h)?L():f=L},N._final=function(y){G.end(),c=y},G.on("drain",function(){if(f){const y=f;f=null,y()}});else if(a(G)){const h=(u(G)?G.writable:G).getWriter();N._write=async function(L,p,A){try{await h.ready,h.write(L).catch(()=>{}),A()}catch(P){A(P)}},N._final=async function(L){try{await h.ready,h.close().catch(()=>{}),c=L}catch(p){L(p)}}}const d=u(s)?s.readable:s;j(d,()=>{if(c){const y=c;c=null,y()}})}if(l){if(r(s))s.on("readable",function(){if(v){const d=v;v=null,d()}}),s.on("end",function(){N.push(null)}),N._read=function(){for(;;){const d=s.read();if(d===null){v=N._read;return}if(!N.push(d))return}};else if(a(s)){const y=(u(s)?s.readable:s).getReader();N._read=async function(){for(;;)try{const{value:h,done:L}=await y.read();if(!N.push(h))return;if(L){N.push(null);return}}catch{return}}}}return N._destroy=function(d,y){!d&&B!==null&&(d=new C),v=null,f=null,c=null,B===null?y(d):(B=y,r(s)&&t(s,d))},N},Nr}var Xi;function da(){if(Xi)return vn;Xi=1;const n=globalThis.AbortController||en().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:o},AbortError:i}=Be(),{validateAbortSignal:a,validateInteger:u,validateObject:g}=rn(),b=Ie().Symbol("kWeak"),C=Ie().Symbol("kResistStopPropagation"),{finished:x}=_t(),R=Xo(),{addAbortSignalNoValidate:j}=kn(),{isWritable:D,isNodeStream:m}=dt(),{deprecate:_}=qe(),{ArrayPrototypePush:f,Boolean:c,MathFloor:v,Number:B,NumberIsNaN:N,Promise:$,PromiseReject:G,PromiseResolve:s,PromisePrototypeThen:w,Symbol:l}=Ie(),d=l("kEmpty"),y=l("kEof");function h(K,Y){if(Y!=null&&g(Y,"options"),(Y==null?void 0:Y.signal)!=null&&a(Y.signal,"options.signal"),m(K)&&!D(K))throw new e("stream",K,"must be writable");const oe=R(this,K);return Y!=null&&Y.signal&&j(Y.signal,oe),oe}function L(K,Y){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);Y!=null&&g(Y,"options"),(Y==null?void 0:Y.signal)!=null&&a(Y.signal,"options.signal");let oe=1;(Y==null?void 0:Y.concurrency)!=null&&(oe=v(Y.concurrency));let fe=oe-1;return(Y==null?void 0:Y.highWaterMark)!=null&&(fe=v(Y.highWaterMark)),u(oe,"options.concurrency",1),u(fe,"options.highWaterMark",0),fe+=oe,(async function*(){const M=qe().AbortSignalAny([Y==null?void 0:Y.signal].filter(c)),U=this,z=[],re={signal:M};let se,ie,q=!1,X=0;function ne(){q=!0,Z()}function Z(){X-=1,we()}function we(){ie&&!q&&X<oe&&z.length<fe&&(ie(),ie=null)}async function Ce(){try{for await(let ye of U){if(q)return;if(M.aborted)throw new i;try{if(ye=K(ye,re),ye===d)continue;ye=s(ye)}catch(Me){ye=G(Me)}X+=1,w(ye,Z,ne),z.push(ye),se&&(se(),se=null),!q&&(z.length>=fe||X>=oe)&&await new $(Me=>{ie=Me})}z.push(y)}catch(ye){const Me=G(ye);w(Me,Z,ne),z.push(Me)}finally{q=!0,se&&(se(),se=null)}}Ce();try{for(;;){for(;z.length>0;){const ye=await z[0];if(ye===y)return;if(M.aborted)throw new i;ye!==d&&(yield ye),z.shift(),we()}await new $(ye=>{se=ye})}}finally{q=!0,ie&&(ie(),ie=null)}}).call(this)}function p(K=void 0){return K!=null&&g(K,"options"),(K==null?void 0:K.signal)!=null&&a(K.signal,"options.signal"),(async function*(){let oe=0;for await(const ce of this){var fe;if(K!=null&&(fe=K.signal)!==null&&fe!==void 0&&fe.aborted)throw new i({cause:K.signal.reason});yield[oe++,ce]}}).call(this)}async function A(K,Y=void 0){for await(const oe of S.call(this,K,Y))return!0;return!1}async function P(K,Y=void 0){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);return!await A.call(this,async(...oe)=>!await K(...oe),Y)}async function E(K,Y){for await(const oe of S.call(this,K,Y))return oe}async function k(K,Y){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);async function oe(fe,ce){return await K(fe,ce),d}for await(const fe of L.call(this,oe,Y));}function S(K,Y){if(typeof K!="function")throw new t("fn",["Function","AsyncFunction"],K);async function oe(fe,ce){return await K(fe,ce)?fe:d}return L.call(this,oe,Y)}class F extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function J(K,Y,oe){var fe;if(typeof K!="function")throw new t("reducer",["Function","AsyncFunction"],K);oe!=null&&g(oe,"options"),(oe==null?void 0:oe.signal)!=null&&a(oe.signal,"options.signal");let ce=arguments.length>1;if(oe!=null&&(fe=oe.signal)!==null&&fe!==void 0&&fe.aborted){const se=new i(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await x(this.destroy(se)),se}const M=new n,U=M.signal;if(oe!=null&&oe.signal){const se={once:!0,[b]:this,[C]:!0};oe.signal.addEventListener("abort",()=>M.abort(),se)}let z=!1;try{for await(const se of this){var re;if(z=!0,oe!=null&&(re=oe.signal)!==null&&re!==void 0&&re.aborted)throw new i;ce?Y=await K(Y,se,{signal:U}):(Y=se,ce=!0)}if(!z&&!ce)throw new F}finally{M.abort()}return Y}async function H(K){K!=null&&g(K,"options"),(K==null?void 0:K.signal)!=null&&a(K.signal,"options.signal");const Y=[];for await(const fe of this){var oe;if(K!=null&&(oe=K.signal)!==null&&oe!==void 0&&oe.aborted)throw new i(void 0,{cause:K.signal.reason});f(Y,fe)}return Y}function ee(K,Y){const oe=L.call(this,K,Y);return(async function*(){for await(const ce of oe)yield*ce}).call(this)}function Q(K){if(K=B(K),N(K))return 0;if(K<0)throw new o("number",">= 0",K);return K}function le(K,Y=void 0){return Y!=null&&g(Y,"options"),(Y==null?void 0:Y.signal)!=null&&a(Y.signal,"options.signal"),K=Q(K),(async function*(){var fe;if(Y!=null&&(fe=Y.signal)!==null&&fe!==void 0&&fe.aborted)throw new i;for await(const M of this){var ce;if(Y!=null&&(ce=Y.signal)!==null&&ce!==void 0&&ce.aborted)throw new i;K--<=0&&(yield M)}}).call(this)}function ue(K,Y=void 0){return Y!=null&&g(Y,"options"),(Y==null?void 0:Y.signal)!=null&&a(Y.signal,"options.signal"),K=Q(K),(async function*(){var fe;if(Y!=null&&(fe=Y.signal)!==null&&fe!==void 0&&fe.aborted)throw new i;for await(const M of this){var ce;if(Y!=null&&(ce=Y.signal)!==null&&ce!==void 0&&ce.aborted)throw new i;if(K-- >0&&(yield M),K<=0)return}}).call(this)}return vn.streamReturningOperators={asIndexedPairs:_(p,"readable.asIndexedPairs will be removed in a future version."),drop:le,filter:S,flatMap:ee,map:L,take:ue,compose:h},vn.promiseReturningOperators={every:P,forEach:k,reduce:J,toArray:H,some:A,find:E},vn}var Cr,Qi;function Qo(){if(Qi)return Cr;Qi=1;const{ArrayPrototypePop:n,Promise:e}=Ie(),{isIterable:t,isNodeStream:r,isWebStream:o}=dt(),{pipelineImpl:i}=ii(),{finished:a}=_t();es();function u(...g){return new e((b,C)=>{let x,R;const j=g[g.length-1];if(j&&typeof j=="object"&&!r(j)&&!t(j)&&!o(j)){const D=n(g);x=D.signal,R=D.end}i(g,(D,m)=>{D?C(D):b(m)},{signal:x,end:R})})}return Cr={finished:a,pipeline:u},Cr}var eo;function es(){if(eo)return ur.exports;eo=1;const{Buffer:n}=Ct(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:r}=Ie(),{promisify:{custom:o}}=qe(),{streamReturningOperators:i,promiseReturningOperators:a}=da(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Be(),g=Xo(),{setDefaultHighWaterMark:b,getDefaultHighWaterMark:C}=Un(),{pipeline:x}=ii(),{destroyer:R}=jt(),j=_t(),D=Qo(),m=dt(),_=ur.exports=ni().Stream;_.isDestroyed=m.isDestroyed,_.isDisturbed=m.isDisturbed,_.isErrored=m.isErrored,_.isReadable=m.isReadable,_.isWritable=m.isWritable,_.Readable=jn();for(const c of t(i)){let B=function(...N){if(new.target)throw u();return _.Readable.from(r(v,this,N))};const v=i[c];e(B,"name",{__proto__:null,value:v.name}),e(B,"length",{__proto__:null,value:v.length}),e(_.Readable.prototype,c,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(a)){let B=function(...N){if(new.target)throw u();return r(v,this,N)};const v=a[c];e(B,"name",{__proto__:null,value:v.name}),e(B,"length",{__proto__:null,value:v.length}),e(_.Readable.prototype,c,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}_.Writable=ri(),_.Duplex=ct(),_.Transform=Jo(),_.PassThrough=Zo(),_.pipeline=x;const{addAbortSignal:f}=kn();return _.addAbortSignal=f,_.finished=j,_.destroy=R,_.compose=g,_.setDefaultHighWaterMark=b,_.getDefaultHighWaterMark=C,e(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return D}}),e(x,o,{__proto__:null,enumerable:!0,get(){return D.pipeline}}),e(j,o,{__proto__:null,enumerable:!0,get(){return D.finished}}),_.Stream=_,_._isUint8Array=function(v){return v instanceof Uint8Array},_._uint8ArrayToBuffer=function(v){return n.from(v.buffer,v.byteOffset,v.byteLength)},ur.exports}var to;function ha(){return to||(to=1,function(n){const e=es(),t=Qo(),r=e.Readable.destroy;n.exports=e.Readable,n.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,n.exports._isUint8Array=e._isUint8Array,n.exports.isDisturbed=e.isDisturbed,n.exports.isErrored=e.isErrored,n.exports.isReadable=e.isReadable,n.exports.Readable=e.Readable,n.exports.Writable=e.Writable,n.exports.Duplex=e.Duplex,n.exports.Transform=e.Transform,n.exports.PassThrough=e.PassThrough,n.exports.addAbortSignal=e.addAbortSignal,n.exports.finished=e.finished,n.exports.destroy=e.destroy,n.exports.destroy=r,n.exports.pipeline=e.pipeline,n.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),n.exports.Stream=e.Stream,n.exports.default=n.exports}(lr)),lr.exports}var qn=ha(),Lr,no;function ts(){if(no)return Lr;no=1,Lr=i,i.default=i,i.stable=b,i.stableStringify=b;var n="[...]",e="[Circular]",t=[],r=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function i(R,j,D,m){typeof m>"u"&&(m=o()),u(R,"",0,[],void 0,0,m);var _;try{r.length===0?_=JSON.stringify(R,j,D):_=JSON.stringify(R,x(j),D)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var f=t.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return _}function a(R,j,D,m){var _=Object.getOwnPropertyDescriptor(m,D);_.get!==void 0?_.configurable?(Object.defineProperty(m,D,{value:R}),t.push([m,D,j,_])):r.push([j,D,R]):(m[D]=R,t.push([m,D,j]))}function u(R,j,D,m,_,f,c){f+=1;var v;if(typeof R=="object"&&R!==null){for(v=0;v<m.length;v++)if(m[v]===R){a(e,R,j,_);return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){a(n,R,j,_);return}if(typeof c.edgesLimit<"u"&&D+1>c.edgesLimit){a(n,R,j,_);return}if(m.push(R),Array.isArray(R))for(v=0;v<R.length;v++)u(R[v],v,v,m,R,f,c);else{var B=Object.keys(R);for(v=0;v<B.length;v++){var N=B[v];u(R[N],N,v,m,R,f,c)}}m.pop()}}function g(R,j){return R<j?-1:R>j?1:0}function b(R,j,D,m){typeof m>"u"&&(m=o());var _=C(R,"",0,[],void 0,0,m)||R,f;try{r.length===0?f=JSON.stringify(_,j,D):f=JSON.stringify(_,x(j),D)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return f}function C(R,j,D,m,_,f,c){f+=1;var v;if(typeof R=="object"&&R!==null){for(v=0;v<m.length;v++)if(m[v]===R){a(e,R,j,_);return}try{if(typeof R.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&f>c.depthLimit){a(n,R,j,_);return}if(typeof c.edgesLimit<"u"&&D+1>c.edgesLimit){a(n,R,j,_);return}if(m.push(R),Array.isArray(R))for(v=0;v<R.length;v++)C(R[v],v,v,m,R,f,c);else{var B={},N=Object.keys(R).sort(g);for(v=0;v<N.length;v++){var $=N[v];C(R[$],$,v,m,R,f,c),B[$]=R[$]}if(typeof _<"u")t.push([_,j,R]),_[j]=B;else return B}m.pop()}}function x(R){return R=typeof R<"u"?R:function(j,D){return D},function(j,D){if(r.length>0)for(var m=0;m<r.length;m++){var _=r[m];if(_[1]===j&&_[0]===D){D=_[2],r.splice(m,1);break}}return R.call(this,j,D)}}return Lr}var ga=ts();const pa=Ut(ga);var Rn={exports:{}},Pr,ro;function wa(){if(ro)return Pr;ro=1,Pr=n;function n(e,t){if(e&&t)return n(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){r[o]=e[o]}),r;function r(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=e.apply(this,o),u=o[o.length-1];return typeof a=="function"&&a!==u&&Object.keys(u).forEach(function(g){a[g]=u[g]}),a}}return Pr}var io;function oi(){if(io)return Rn.exports;io=1;var n=wa();Rn.exports=n(e),Rn.exports.strict=n(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(r){var o=function(){return o.called?o.value:(o.called=!0,o.value=r.apply(this,arguments))};return o.called=!1,o}function t(r){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=r.apply(this,arguments)},i=r.name||"Function wrapped with `once`";return o.onceError=i+" shouldn't be called more than once",o.called=!1,o}return Rn.exports}var Mr,oo;function ns(){if(oo)return Mr;oo=1;var n=oi(),e=function(){},t=function(i){return i.setHeader&&typeof i.abort=="function"},r=function(i){return i.stdio&&Array.isArray(i.stdio)&&i.stdio.length===3},o=function(i,a,u){if(typeof a=="function")return o(i,null,a);a||(a={}),u=n(u||e);var g=i._writableState,b=i._readableState,C=a.readable||a.readable!==!1&&i.readable,x=a.writable||a.writable!==!1&&i.writable,R=!1,j=function(){i.writable||D()},D=function(){x=!1,C||u.call(i)},m=function(){C=!1,x||u.call(i)},_=function(N){u.call(i,N?new Error("exited with error code: "+N):null)},f=function(N){u.call(i,N)},c=function(){process.nextTick(v)},v=function(){if(!R){if(C&&!(b&&b.ended&&!b.destroyed))return u.call(i,new Error("premature close"));if(x&&!(g&&g.ended&&!g.destroyed))return u.call(i,new Error("premature close"))}},B=function(){i.req.on("finish",D)};return t(i)?(i.on("complete",D),i.on("abort",c),i.req?B():i.on("request",B)):x&&!g&&(i.on("end",j),i.on("close",j)),r(i)&&i.on("exit",_),i.on("end",m),i.on("finish",D),a.error!==!1&&i.on("error",f),i.on("close",c),function(){R=!0,i.removeListener("complete",D),i.removeListener("abort",c),i.removeListener("request",B),i.req&&i.req.removeListener("finish",D),i.removeListener("end",j),i.removeListener("close",j),i.removeListener("finish",D),i.removeListener("exit",_),i.removeListener("end",m),i.removeListener("error",f),i.removeListener("close",c)}};return Mr=o,Mr}var ba=ns();const so=Ut(ba);var ya=oi();const _a=Ut(ya);var Br,ao;function ma(){if(ao)return Br;ao=1;var n=oi(),e=ns(),t;try{t=oa}catch{}var r=function(){},o=/^v?\.0/.test(process.version),i=function(R){return typeof R=="function"},a=function(R){return!o||!t?!1:(R instanceof(t.ReadStream||r)||R instanceof(t.WriteStream||r))&&i(R.close)},u=function(R){return R.setHeader&&i(R.abort)},g=function(R,j,D,m){m=n(m);var _=!1;R.on("close",function(){_=!0}),e(R,{readable:j,writable:D},function(c){if(c)return m(c);_=!0,m()});var f=!1;return function(c){if(!_&&!f){if(f=!0,a(R))return R.close(r);if(u(R))return R.abort();if(i(R.destroy))return R.destroy();m(c||new Error("stream was destroyed"))}}},b=function(R){R()},C=function(R,j){return R.pipe(j)},x=function(){var R=Array.prototype.slice.call(arguments),j=i(R[R.length-1]||r)&&R.pop()||r;if(Array.isArray(R[0])&&(R=R[0]),R.length<2)throw new Error("pump requires two streams per minimum");var D,m=R.map(function(_,f){var c=f<R.length-1,v=f>0;return g(_,c,v,function(B){D||(D=B),B&&m.forEach(b),!c&&(m.forEach(b),j(D))})});return R.reduce(C)};return Br=x,Br}var Ea=ma();const lo=Ut(Ea);function In(){}const uo="SYN",Dr="ACK",fo="BRK";class co extends qn.Duplex{constructor(e){let{name:t,target:r,targetWindow:o=window,targetOrigin:i="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=o,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(fo,null,In),this._haveSyn=!1,this._init=!1}_handShake(){this._write(uo,null,In),this.cork()}_onData(e){if(!this._init)e===uo?(this._haveSyn=!0,this._write(Dr,null,In)):e===Dr&&(this._init=!0,this._haveSyn||this._write(Dr,null,In),this.uncork());else if(e===fo)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Sa={rpc:{internal:-32603}},ho={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},go=Sa.rpc.internal,va="Unspecified error message. This is a bug, please report it.";function rs(n){return Number.isInteger(n)}function po(n){return typeof n=="string"&&n.length>0}function wo(n){return!!n&&typeof n=="object"&&!Array.isArray(n)}function is(n){const e=n;return!(!e||!rs(e.code)||!po(e.message)||e.stack&&!po(e.stack))}function Aa(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:va;if(rs(n)){const t=n.toString();if(Object.hasOwn(ho,t))return ho[t].message}return e}const Ra={code:go,message:Aa(go)};function Kr(n){try{JSON.parse(JSON.stringify(n,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function bo(n){return Object.getOwnPropertyNames(n).reduce((e,t)=>{const r=n[t];return Kr(r)&&(e[t]=r),e},{})}function Ia(n){return Array.isArray(n)?n.map(e=>Kr(e)?e:wo(e)?bo(e):null):wo(n)?bo(n):Kr(n)?n:null}function Ta(n,e){if(n&&typeof n=="object"&&"serialize"in n&&typeof n.serialize=="function")return n.serialize();if(is(n))return n;const t=Ia(n);return Ke(Ke({},e),{},{data:{cause:t}})}function yo(n){let{fallbackError:e=Ra,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!is(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=Ta(n,e);return t||delete r.stack,r}function _o(n,e,t){try{Reflect.apply(n,e,t)}catch(r){setTimeout(()=>{throw r})}}function xa(n){const e=n.length,t=new Array(e);for(let r=0;r<e;r+=1)t[r]=n[r];return t}class Wn extends sa.EventEmitter{emit(e){let t=e==="error";const r=this._events;if(r!==void 0)t=t&&r.error===void 0;else if(!t)return!1;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(t){let g;if(i.length>0&&([g]=i),g instanceof Error)throw g;const b=new Error(`Unhandled error.${g?` (${g.message})`:""}`);throw b.context=g,b}const u=r[e];if(u===void 0)return!1;if(typeof u=="function")_o(u,this,i);else{const g=u.length,b=xa(u);for(let C=0;C<g;C+=1)_o(b[C],this,i)}return!0}}class Kt extends Error{constructor(e){let{code:t,message:r,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||typeof r!="string")throw new Error("message must be string");super(r),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,o!==void 0&&(this.data=o)}toString(){return pa({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Yr=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(r,o)=>{r||o.error?e(r||o.error):!t||Array.isArray(o)?n(o):n(o.result)}};function Oa(){const n={};function e(){return!1}const t=new Wn;function r(g){const b=n[g.id];if(!b)throw new Error(`StreamMiddleware - Unknown response id "${g.id}"`);delete n[g.id],Object.assign(b.res,g),setTimeout(b.end)}function o(g){t.emit("notification",g)}function i(g,b,C){let x;try{!g.id?o(g):r(g)}catch(R){x=R}C(x)}const a=new qn.Duplex({objectMode:!0,read:e,write:i});return{events:t,middleware:(g,b,C,x)=>{a.push(g),n[g.id]={req:g,res:b,next:C,end:x}},stream:a}}function Na(){return(n,e,t,r)=>{const o=n.id,i=Math.random().toString(36).slice(2);n.id=i,e.id=i,t(a=>{n.id=o,e.id=o,a()})}}class lt extends Wn{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const o=[];let i=null,a=!1;for(const u of r)if([i,a]=await lt._runMiddleware(e,t,u,o),a)break;return[i,a,o.reverse()]}static _runMiddleware(e,t,r,o){return new Promise(i=>{const a=g=>{const b=g||t.error;b&&(typeof b=="object"&&Object.keys(b).includes("stack")===!1&&(b.stack="Stack trace is not available."),t.error=yo(b,{shouldIncludeStack:!0,fallbackError:{message:(b==null?void 0:b.message)||(b==null?void 0:b.toString()),code:(b==null?void 0:b.code)||-32603,stack:(b==null?void 0:b.stack)||"Stack trace is not available.",data:(b==null?void 0:b.data)||(b==null?void 0:b.message)||(b==null?void 0:b.toString())}})),i([b,!0])},u=g=>{t.error?a(t.error):(g&&(typeof g!="function"&&a(new Kt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(g)),i([null,!1]))};try{r(e,t,u,a)}catch(g){a(g)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((r,o)=>{t(i=>i?o(i):r())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Kt({code:-32603,message:"Response has no error or result for request"});if(!r)throw new Kt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,o)=>{try{const[i,a,u]=await lt._runAllMiddleware(e,t,this._middleware);return a?(await lt._runReturnHandlers(u),o(i)):r(async g=>{try{await lt._runReturnHandlers(u)}catch(b){return g(b)}return g()})}catch(i){return o(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t,r)=>{this._handle(e,(o,i)=>{o&&i===void 0?r(o):t(i)}).catch(r)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const j=new Kt({code:-32603,message:"request must be plain object"});return t(j,{id:void 0,jsonrpc:"2.0",error:j})}if(typeof e.method!="string"){const j=new Kt({code:-32603,message:"method must be string"});return t(j,{id:e.id,jsonrpc:"2.0",error:j})}const r=Ke({},e),o={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,o)}catch(j){i=j}if(i&&(delete o.result,!o.error)){var a,u,g,b,C,x,R;typeof i=="object"&&Object.keys(i).includes("stack")===!1&&(i.stack="Stack trace is not available."),o.error=yo(i,{shouldIncludeStack:!0,fallbackError:{message:((a=i)===null||a===void 0?void 0:a.message)||((u=i)===null||u===void 0?void 0:u.toString()),code:((g=i)===null||g===void 0?void 0:g.code)||-32603,stack:((b=i)===null||b===void 0?void 0:b.stack)||"Stack trace is not available.",data:((C=i)===null||C===void 0?void 0:C.data)||((x=i)===null||x===void 0?void 0:x.message)||((R=i)===null||R===void 0?void 0:R.toString())}})}return t(i,o)}async _processRequest(e,t){const[r,o,i]=await lt._runAllMiddleware(e,t,this._middleware);if(lt._checkForCompletion(e,t,o),await lt._runReturnHandlers(i),r)throw r}}class Ca extends qn.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}const mo=Symbol("IGNORE_SUBSTREAM");class La extends qn.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Ke(Ke({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Ca({parent:this,name:e});return this._substreams[e]=t,Pa(this,r=>t.destroy(r||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=mo}_read(){}_write(e,t,r){const{name:o,data:i}=e;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const a=this._substreams[o];return a?(a!==mo&&a.push(i),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),r())}}function Pa(n,e){const t=_a(e);so(n,{readable:!1},t),so(n,{writable:!1},t)}var Jt={exports:{}};Jt.exports;var Eo;function Ma(){return Eo||(Eo=1,function(n,e){var t=200,r="__lodash_hash_undefined__",o=800,i=16,a=9007199254740991,u="[object Arguments]",g="[object Array]",b="[object AsyncFunction]",C="[object Boolean]",x="[object Date]",R="[object Error]",j="[object Function]",D="[object GeneratorFunction]",m="[object Map]",_="[object Number]",f="[object Null]",c="[object Object]",v="[object Proxy]",B="[object RegExp]",N="[object Set]",$="[object String]",G="[object Undefined]",s="[object WeakMap]",w="[object ArrayBuffer]",l="[object DataView]",d="[object Float32Array]",y="[object Float64Array]",h="[object Int8Array]",L="[object Int16Array]",p="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",E="[object Uint16Array]",k="[object Uint32Array]",S=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,H={};H[d]=H[y]=H[h]=H[L]=H[p]=H[A]=H[P]=H[E]=H[k]=!0,H[u]=H[g]=H[w]=H[C]=H[l]=H[x]=H[R]=H[j]=H[m]=H[_]=H[c]=H[B]=H[N]=H[$]=H[s]=!1;var ee=typeof En=="object"&&En&&En.Object===Object&&En,Q=typeof self=="object"&&self&&self.Object===Object&&self,le=ee||Q||Function("return this")(),ue=e&&!e.nodeType&&e,K=ue&&!0&&n&&!n.nodeType&&n,Y=K&&K.exports===ue,oe=Y&&ee.process,fe=function(){try{var T=K&&K.require&&K.require("util").types;return T||oe&&oe.binding&&oe.binding("util")}catch{}}(),ce=fe&&fe.isTypedArray;function M(T,W,V){switch(V.length){case 0:return T.call(W);case 1:return T.call(W,V[0]);case 2:return T.call(W,V[0],V[1]);case 3:return T.call(W,V[0],V[1],V[2])}return T.apply(W,V)}function U(T,W){for(var V=-1,he=Array(T);++V<T;)he[V]=W(V);return he}function z(T){return function(W){return T(W)}}function re(T,W){return T==null?void 0:T[W]}function se(T,W){return function(V){return T(W(V))}}var ie=Array.prototype,q=Function.prototype,X=Object.prototype,ne=le["__core-js_shared__"],Z=q.toString,we=X.hasOwnProperty,Ce=function(){var T=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),ye=X.toString,Me=Z.call(Object),xe=RegExp("^"+Z.call(we).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=Y?le.Buffer:void 0,Ye=le.Symbol,mt=le.Uint8Array;Le&&Le.allocUnsafe;var Pe=se(Object.getPrototypeOf,Object),ln=Object.create,Vn=X.propertyIsEnumerable,un=ie.splice,rt=Ye?Ye.toStringTag:void 0,Pt=function(){try{var T=Qn(Object,"defineProperty");return T({},"",{}),T}catch{}}(),Kn=Le?Le.isBuffer:void 0,qt=Math.max,fn=Date.now,cn=Qn(le,"Map"),ht=Qn(Object,"create"),Wt=function(){function T(){}return function(W){if(!St(W))return{};if(ln)return ln(W);T.prototype=W;var V=new T;return T.prototype=void 0,V}}();function it(T){var W=-1,V=T==null?0:T.length;for(this.clear();++W<V;){var he=T[W];this.set(he[0],he[1])}}function Yn(){this.__data__=ht?ht(null):{},this.size=0}function Ft(T){var W=this.has(T)&&delete this.__data__[T];return this.size-=W?1:0,W}function dn(T){var W=this.__data__;if(ht){var V=W[T];return V===r?void 0:V}return we.call(W,T)?W[T]:void 0}function I(T){var W=this.__data__;return ht?W[T]!==void 0:we.call(W,T)}function O(T,W){var V=this.__data__;return this.size+=this.has(T)?0:1,V[T]=ht&&W===void 0?r:W,this}it.prototype.clear=Yn,it.prototype.delete=Ft,it.prototype.get=dn,it.prototype.has=I,it.prototype.set=O;function te(T){var W=-1,V=T==null?0:T.length;for(this.clear();++W<V;){var he=T[W];this.set(he[0],he[1])}}function ae(){this.__data__=[],this.size=0}function de(T){var W=this.__data__,V=bn(W,T);if(V<0)return!1;var he=W.length-1;return V==he?W.pop():un.call(W,V,1),--this.size,!0}function Oe(T){var W=this.__data__,V=bn(W,T);return V<0?void 0:W[V][1]}function De(T){return bn(this.__data__,T)>-1}function hn(T,W){var V=this.__data__,he=bn(V,T);return he<0?(++this.size,V.push([T,W])):V[he][1]=W,this}te.prototype.clear=ae,te.prototype.delete=de,te.prototype.get=Oe,te.prototype.has=De,te.prototype.set=hn;function ke(T){var W=-1,V=T==null?0:T.length;for(this.clear();++W<V;){var he=T[W];this.set(he[0],he[1])}}function gn(){this.size=0,this.__data__={hash:new it,map:new(cn||te),string:new it}}function Jn(T){var W=_n(this,T).delete(T);return this.size-=W?1:0,W}function pn(T){return _n(this,T).get(T)}function wn(T){return _n(this,T).has(T)}function $t(T,W){var V=_n(this,T),he=V.size;return V.set(T,W),this.size+=V.size==he?0:1,this}ke.prototype.clear=gn,ke.prototype.delete=Jn,ke.prototype.get=pn,ke.prototype.has=wn,ke.prototype.set=$t;function et(T){var W=this.__data__=new te(T);this.size=W.size}function Ht(){this.__data__=new te,this.size=0}function Et(T){var W=this.__data__,V=W.delete(T);return this.size=W.size,V}function ot(T){return this.__data__.get(T)}function Je(T){return this.__data__.has(T)}function As(T,W){var V=this.__data__;if(V instanceof te){var he=V.__data__;if(!cn||he.length<t-1)return he.push([T,W]),this.size=++V.size,this;V=this.__data__=new ke(he)}return V.set(T,W),this.size=V.size,this}et.prototype.clear=Ht,et.prototype.delete=Et,et.prototype.get=ot,et.prototype.has=Je,et.prototype.set=As;function Rs(T,W){var V=nr(T),he=!V&&tr(T),be=!V&&!he&&_i(T),me=!V&&!he&&!be&&Ei(T),ve=V||he||be||me,_e=ve?U(T.length,String):[],Ae=_e.length;for(var Ze in T)ve&&(Ze=="length"||be&&(Ze=="offset"||Ze=="parent")||me&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||bi(Ze,Ae))||_e.push(Ze);return _e}function Zn(T,W,V){(V!==void 0&&!mn(T[W],V)||V===void 0&&!(W in T))&&Xn(T,W,V)}function Is(T,W,V){var he=T[W];(!(we.call(T,W)&&mn(he,V))||V===void 0&&!(W in T))&&Xn(T,W,V)}function bn(T,W){for(var V=T.length;V--;)if(mn(T[V][0],W))return V;return-1}function Xn(T,W,V){W=="__proto__"&&Pt?Pt(T,W,{configurable:!0,enumerable:!0,value:V,writable:!0}):T[W]=V}var Ts=qs();function yn(T){return T==null?T===void 0?G:f:rt&&rt in Object(T)?Ws(T):Vs(T)}function pi(T){return zt(T)&&yn(T)==u}function xs(T){if(!St(T)||zs(T))return!1;var W=ir(T)?xe:F;return W.test(Zs(T))}function Os(T){return zt(T)&&mi(T.length)&&!!H[yn(T)]}function Ns(T){if(!St(T))return Gs(T);var W=yi(T),V=[];for(var he in T)he=="constructor"&&(W||!we.call(T,he))||V.push(he);return V}function wi(T,W,V,he,be){T!==W&&Ts(W,function(me,ve){if(be||(be=new et),St(me))Cs(T,W,ve,V,wi,he,be);else{var _e=he?he(er(T,ve),me,ve+"",T,W,be):void 0;_e===void 0&&(_e=me),Zn(T,ve,_e)}},Si)}function Cs(T,W,V,he,be,me,ve){var _e=er(T,V),Ae=er(W,V),Ze=ve.get(Ae);if(Ze){Zn(T,V,Ze);return}var We=me?me(_e,Ae,V+"",T,W,ve):void 0,Gt=We===void 0;if(Gt){var or=nr(Ae),sr=!or&&_i(Ae),Ai=!or&&!sr&&Ei(Ae);We=Ae,or||sr||Ai?nr(_e)?We=_e:Xs(_e)?We=ks(_e):sr?(Gt=!1,We=Ms(Ae)):Ai?(Gt=!1,We=Ds(Ae)):We=[]:Qs(Ae)||tr(Ae)?(We=_e,tr(_e)?We=ea(_e):(!St(_e)||ir(_e))&&(We=Fs(Ae))):Gt=!1}Gt&&(ve.set(Ae,We),be(We,Ae,he,me,ve),ve.delete(Ae)),Zn(T,V,We)}function Ls(T,W){return Ys(Ks(T,W,vi),T+"")}var Ps=Pt?function(T,W){return Pt(T,"toString",{configurable:!0,enumerable:!1,value:na(W),writable:!0})}:vi;function Ms(T,W){return T.slice()}function Bs(T){var W=new T.constructor(T.byteLength);return new mt(W).set(new mt(T)),W}function Ds(T,W){var V=Bs(T.buffer);return new T.constructor(V,T.byteOffset,T.length)}function ks(T,W){var V=-1,he=T.length;for(W||(W=Array(he));++V<he;)W[V]=T[V];return W}function Us(T,W,V,he){var be=!V;V||(V={});for(var me=-1,ve=W.length;++me<ve;){var _e=W[me],Ae=void 0;Ae===void 0&&(Ae=T[_e]),be?Xn(V,_e,Ae):Is(V,_e,Ae)}return V}function js(T){return Ls(function(W,V){var he=-1,be=V.length,me=be>1?V[be-1]:void 0,ve=be>2?V[2]:void 0;for(me=T.length>3&&typeof me=="function"?(be--,me):void 0,ve&&$s(V[0],V[1],ve)&&(me=be<3?void 0:me,be=1),W=Object(W);++he<be;){var _e=V[he];_e&&T(W,_e,he,me)}return W})}function qs(T){return function(W,V,he){for(var be=-1,me=Object(W),ve=he(W),_e=ve.length;_e--;){var Ae=ve[++be];if(V(me[Ae],Ae,me)===!1)break}return W}}function _n(T,W){var V=T.__data__;return Hs(W)?V[typeof W=="string"?"string":"hash"]:V.map}function Qn(T,W){var V=re(T,W);return xs(V)?V:void 0}function Ws(T){var W=we.call(T,rt),V=T[rt];try{T[rt]=void 0;var he=!0}catch{}var be=ye.call(T);return he&&(W?T[rt]=V:delete T[rt]),be}function Fs(T){return typeof T.constructor=="function"&&!yi(T)?Wt(Pe(T)):{}}function bi(T,W){var V=typeof T;return W=W??a,!!W&&(V=="number"||V!="symbol"&&J.test(T))&&T>-1&&T%1==0&&T<W}function $s(T,W,V){if(!St(V))return!1;var he=typeof W;return(he=="number"?rr(V)&&bi(W,V.length):he=="string"&&W in V)?mn(V[W],T):!1}function Hs(T){var W=typeof T;return W=="string"||W=="number"||W=="symbol"||W=="boolean"?T!=="__proto__":T===null}function zs(T){return!!Ce&&Ce in T}function yi(T){var W=T&&T.constructor,V=typeof W=="function"&&W.prototype||X;return T===V}function Gs(T){var W=[];if(T!=null)for(var V in Object(T))W.push(V);return W}function Vs(T){return ye.call(T)}function Ks(T,W,V){return W=qt(W===void 0?T.length-1:W,0),function(){for(var he=arguments,be=-1,me=qt(he.length-W,0),ve=Array(me);++be<me;)ve[be]=he[W+be];be=-1;for(var _e=Array(W+1);++be<W;)_e[be]=he[be];return _e[W]=V(ve),M(T,this,_e)}}function er(T,W){if(!(W==="constructor"&&typeof T[W]=="function")&&W!="__proto__")return T[W]}var Ys=Js(Ps);function Js(T){var W=0,V=0;return function(){var he=fn(),be=i-(he-V);if(V=he,be>0){if(++W>=o)return arguments[0]}else W=0;return T.apply(void 0,arguments)}}function Zs(T){if(T!=null){try{return Z.call(T)}catch{}try{return T+""}catch{}}return""}function mn(T,W){return T===W||T!==T&&W!==W}var tr=pi(function(){return arguments}())?pi:function(T){return zt(T)&&we.call(T,"callee")&&!Vn.call(T,"callee")},nr=Array.isArray;function rr(T){return T!=null&&mi(T.length)&&!ir(T)}function Xs(T){return zt(T)&&rr(T)}var _i=Kn||ra;function ir(T){if(!St(T))return!1;var W=yn(T);return W==j||W==D||W==b||W==v}function mi(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=a}function St(T){var W=typeof T;return T!=null&&(W=="object"||W=="function")}function zt(T){return T!=null&&typeof T=="object"}function Qs(T){if(!zt(T)||yn(T)!=c)return!1;var W=Pe(T);if(W===null)return!0;var V=we.call(W,"constructor")&&W.constructor;return typeof V=="function"&&V instanceof V&&Z.call(V)==Me}var Ei=ce?z(ce):Os;function ea(T){return Us(T,Si(T))}function Si(T){return rr(T)?Rs(T):Ns(T)}var ta=js(function(T,W,V){wi(T,W,V)});function na(T){return function(){return T}}function vi(T){return T}function ra(){return!1}n.exports=ta}(Jt,Jt.exports)),Jt.exports}Ma();var Mn={exports:{}},Ba=Mn.exports,So;function Da(){return So||(So=1,function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(Ba,function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},a=null;function u(m,_){var f=m[_];if(typeof f.bind=="function")return f.bind(m);try{return Function.prototype.bind.call(f,m)}catch{return function(){return Function.prototype.apply.apply(f,[m,arguments])}}}function g(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function b(m){return m==="debug"&&(m="log"),typeof console===t?!1:m==="trace"&&r?g:console[m]!==void 0?u(console,m):console.log!==void 0?u(console,"log"):e}function C(){for(var m=this.getLevel(),_=0;_<o.length;_++){var f=o[_];this[f]=_<m?e:this.methodFactory(f,m,this.name)}if(this.log=this.debug,typeof console===t&&m<this.levels.SILENT)return"No console available for logging"}function x(m){return function(){typeof console!==t&&(C.call(this),this[m].apply(this,arguments))}}function R(m,_,f){return b(m)||x.apply(this,arguments)}function j(m,_){var f=this,c,v,B,N="loglevel";typeof m=="string"?N+=":"+m:typeof m=="symbol"&&(N=void 0);function $(d){var y=(o[d]||"silent").toUpperCase();if(!(typeof window===t||!N)){try{window.localStorage[N]=y;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+y+";"}catch{}}}function G(){var d;if(!(typeof window===t||!N)){try{d=window.localStorage[N]}catch{}if(typeof d===t)try{var y=window.document.cookie,h=encodeURIComponent(N),L=y.indexOf(h+"=");L!==-1&&(d=/^([^;]+)/.exec(y.slice(L+h.length+1))[1])}catch{}return f.levels[d]===void 0&&(d=void 0),d}}function s(){if(!(typeof window===t||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function w(d){var y=d;if(typeof y=="string"&&f.levels[y.toUpperCase()]!==void 0&&(y=f.levels[y.toUpperCase()]),typeof y=="number"&&y>=0&&y<=f.levels.SILENT)return y;throw new TypeError("log.setLevel() called with invalid level: "+d)}f.name=m,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=_||R,f.getLevel=function(){return B??v??c},f.setLevel=function(d,y){return B=w(d),y!==!1&&$(B),C.call(f)},f.setDefaultLevel=function(d){v=w(d),G()||f.setLevel(d,!1)},f.resetLevel=function(){B=null,s(),C.call(f)},f.enableAll=function(d){f.setLevel(f.levels.TRACE,d)},f.disableAll=function(d){f.setLevel(f.levels.SILENT,d)},f.rebuild=function(){if(a!==f&&(c=w(a.getLevel())),C.call(f),a===f)for(var d in i)i[d].rebuild()},c=w(a?a.getLevel():"WARN");var l=G();l!=null&&(B=w(l)),C.call(f)}a=new j,a.getLogger=function(_){if(typeof _!="symbol"&&typeof _!="string"||_==="")throw new TypeError("You must supply a name when creating a logger.");var f=i[_];return f||(f=i[_]=new j(_,a.methodFactory)),f};var D=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=D),a},a.getLoggers=function(){return i},a.default=a,a})}(Mn)),Mn.exports}var os=Da();const Bn=Ut(os),ka=Bn.getLogger("http-helpers");ka.setLevel(os.levels.INFO);function vo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Ua(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Fn(n,...e){if(!Ua(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}function ja(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vo(n.outputLen),vo(n.blockLen)}function Dn(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function qa(n,e){Fn(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const kr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ur=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),tt=(n,e)=>n<<32-e|n>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Wa(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function si(n){return typeof n=="string"&&(n=Wa(n)),Fn(n),n}function Fa(...n){let e=0;for(let r=0;r<n.length;r++){const o=n[r];Fn(o),e+=o.length}const t=new Uint8Array(e);for(let r=0,o=0;r<n.length;r++){const i=n[r];t.set(i,o),o+=i.length}return t}class ss{clone(){return this._cloneInto()}}function $a(n){const e=r=>n().update(si(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Ha(n=32){if(kr&&typeof kr.getRandomValues=="function")return kr.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function za(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(t>>o&i),u=Number(t&i),g=r?4:0,b=r?0:4;n.setUint32(e+g,a,r),n.setUint32(e+b,u,r)}const Ga=(n,e,t)=>n&e^~n&t,Va=(n,e,t)=>n&e^n&t^e&t;class Ka extends ss{constructor(e,t,r,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ur(this.buffer)}update(e){Dn(this);const{view:t,buffer:r,blockLen:o}=this;e=si(e);const i=e.length;for(let a=0;a<i;){const u=Math.min(o-this.pos,i-a);if(u===o){const g=Ur(e);for(;o<=i-a;a+=o)this.process(g,a);continue}r.set(e.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dn(this),qa(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:o,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let x=a;x<o;x++)t[x]=0;za(r,o-8,BigInt(this.length*8),i),this.process(r,0);const u=Ur(e),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=g/4,C=this.get();if(b>C.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<b;x++)u.setUint32(4*x,C[x],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:o,finished:i,destroyed:a,pos:u}=this;return e.length=o,e.pos=u,e.finished=i,e.destroyed=a,o%t&&e.buffer.set(r),e}}const Ya=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pt=new Uint32Array(64);class Ja extends Ka{constructor(){super(64,32,8,!1),this.A=gt[0]|0,this.B=gt[1]|0,this.C=gt[2]|0,this.D=gt[3]|0,this.E=gt[4]|0,this.F=gt[5]|0,this.G=gt[6]|0,this.H=gt[7]|0}get(){const{A:e,B:t,C:r,D:o,E:i,F:a,G:u,H:g}=this;return[e,t,r,o,i,a,u,g]}set(e,t,r,o,i,a,u,g){this.A=e|0,this.B=t|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=g|0}process(e,t){for(let x=0;x<16;x++,t+=4)pt[x]=e.getUint32(t,!1);for(let x=16;x<64;x++){const R=pt[x-15],j=pt[x-2],D=tt(R,7)^tt(R,18)^R>>>3,m=tt(j,17)^tt(j,19)^j>>>10;pt[x]=m+pt[x-7]+D+pt[x-16]|0}let{A:r,B:o,C:i,D:a,E:u,F:g,G:b,H:C}=this;for(let x=0;x<64;x++){const R=tt(u,6)^tt(u,11)^tt(u,25),j=C+R+Ga(u,g,b)+Ya[x]+pt[x]|0,m=(tt(r,2)^tt(r,13)^tt(r,22))+Va(r,o,i)|0;C=b,b=g,g=u,u=a+j|0,a=i,i=o,o=r,r=j+m|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,g=g+this.F|0,b=b+this.G|0,C=C+this.H|0,this.set(r,o,i,a,u,g,b,C)}roundClean(){pt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Za=$a(()=>new Ja);class as extends ss{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ja(e);const r=si(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Dn(this),this.iHash.update(e),this}digestInto(e){Dn(this),Fn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return e=e,e.finished=o,e.destroyed=i,e.blockLen=a,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ls=(n,e,t)=>new as(n,e).update(t).digest();ls.create=(n,e)=>new as(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const us=BigInt(0),$n=BigInt(1),Xa=BigInt(2);function Ot(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function on(n){if(!Ot(n))throw new Error("Uint8Array expected")}const Qa=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Bt(n){on(n);let e="";for(let t=0;t<n.length;t++)e+=Qa[n[t]];return e}function fs(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function ai(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const st={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ao(n){if(n>=st._0&&n<=st._9)return n-st._0;if(n>=st._A&&n<=st._F)return n-(st._A-10);if(n>=st._a&&n<=st._f)return n-(st._a-10)}function Dt(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let o=0,i=0;o<t;o++,i+=2){const a=Ao(n.charCodeAt(i)),u=Ao(n.charCodeAt(i+1));if(a===void 0||u===void 0){const g=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+i)}r[o]=a*16+u}return r}function xt(n){return ai(Bt(n))}function li(n){return on(n),ai(Bt(Uint8Array.from(n).reverse()))}function kt(n,e){return Dt(n.toString(16).padStart(e*2,"0"))}function ui(n,e){return kt(n,e).reverse()}function el(n){return Dt(fs(n))}function Qe(n,e,t){let r;if(typeof e=="string")try{r=Dt(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Ot(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const o=r.length;if(typeof t=="number"&&o!==t)throw new Error(`${n} expected ${t} bytes, got ${o}`);return r}function tn(...n){let e=0;for(let r=0;r<n.length;r++){const o=n[r];on(o),e+=o.length}const t=new Uint8Array(e);for(let r=0,o=0;r<n.length;r++){const i=n[r];t.set(i,o),o+=i.length}return t}function tl(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function nl(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function rl(n){let e;for(e=0;n>us;n>>=$n,e+=1);return e}function il(n,e){return n>>BigInt(e)&$n}function ol(n,e,t){return n|(t?$n:us)<<BigInt(e)}const fi=n=>(Xa<<BigInt(n-1))-$n,jr=n=>new Uint8Array(n),Ro=n=>Uint8Array.from(n);function cs(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=jr(n),o=jr(n),i=0;const a=()=>{r.fill(1),o.fill(0),i=0},u=(...x)=>t(o,r,...x),g=(x=jr())=>{o=u(Ro([0]),x),r=u(),x.length!==0&&(o=u(Ro([1]),x),r=u())},b=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const R=[];for(;x<e;){r=u();const j=r.slice();R.push(j),x+=r.length}return tn(...R)};return(x,R)=>{a(),g(x);let j;for(;!(j=R(b()));)g();return a(),j}}const sl={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Ot(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function sn(n,e,t={}){const r=(o,i,a)=>{const u=sl[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);const g=n[o];if(!(a&&g===void 0)&&!u(g,n))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${i}`)};for(const[o,i]of Object.entries(e))r(o,i,!1);for(const[o,i]of Object.entries(t))r(o,i,!0);return n}const al=Object.freeze(Object.defineProperty({__proto__:null,abytes:on,bitGet:il,bitLen:rl,bitMask:fi,bitSet:ol,bytesToHex:Bt,bytesToNumberBE:xt,bytesToNumberLE:li,concatBytes:tn,createHmacDrbg:cs,ensureBytes:Qe,equalBytes:tl,hexToBytes:Dt,hexToNumber:ai,isBytes:Ot,numberToBytesBE:kt,numberToBytesLE:ui,numberToHexUnpadded:fs,numberToVarBytesBE:el,utf8ToBytes:nl,validateObject:sn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),Te=BigInt(1),It=BigInt(2),ll=BigInt(3),Jr=BigInt(4),Io=BigInt(5),To=BigInt(8);BigInt(9);BigInt(16);function je(n,e){const t=n%e;return t>=Ne?t:e+t}function ul(n,e,t){if(t<=Ne||e<Ne)throw new Error("Expected power/modulo > 0");if(t===Te)return Ne;let r=Te;for(;e>Ne;)e&Te&&(r=r*n%t),n=n*n%t,e>>=Te;return r}function $e(n,e,t){let r=n;for(;e-- >Ne;)r*=r,r%=t;return r}function Zr(n,e){if(n===Ne||e<=Ne)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=je(n,e),r=e,o=Ne,i=Te;for(;t!==Ne;){const u=r/t,g=r%t,b=o-i*u;r=t,t=g,o=i,i=b}if(r!==Te)throw new Error("invert: does not exist");return je(o,e)}function fl(n){const e=(n-Te)/It;let t,r,o;for(t=n-Te,r=0;t%It===Ne;t/=It,r++);for(o=It;o<n&&ul(o,e,n)!==n-Te;o++);if(r===1){const a=(n+Te)/Jr;return function(g,b){const C=g.pow(b,a);if(!g.eql(g.sqr(C),b))throw new Error("Cannot find square root");return C}}const i=(t+Te)/It;return function(u,g){if(u.pow(g,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let b=r,C=u.pow(u.mul(u.ONE,o),t),x=u.pow(g,i),R=u.pow(g,t);for(;!u.eql(R,u.ONE);){if(u.eql(R,u.ZERO))return u.ZERO;let j=1;for(let m=u.sqr(R);j<b&&!u.eql(m,u.ONE);j++)m=u.sqr(m);const D=u.pow(C,Te<<BigInt(b-j-1));C=u.sqr(D),x=u.mul(x,D),R=u.mul(R,C),b=j}return x}}function cl(n){if(n%Jr===ll){const e=(n+Te)/Jr;return function(r,o){const i=r.pow(o,e);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(n%To===Io){const e=(n-Io)/To;return function(r,o){const i=r.mul(o,It),a=r.pow(i,e),u=r.mul(o,a),g=r.mul(r.mul(u,It),a),b=r.mul(u,r.sub(g,r.ONE));if(!r.eql(r.sqr(b),o))throw new Error("Cannot find square root");return b}}return fl(n)}const dl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hl(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=dl.reduce((r,o)=>(r[o]="function",r),e);return sn(n,t)}function gl(n,e,t){if(t<Ne)throw new Error("Expected power > 0");if(t===Ne)return n.ONE;if(t===Te)return e;let r=n.ONE,o=e;for(;t>Ne;)t&Te&&(r=n.mul(r,o)),o=n.sqr(o),t>>=Te;return r}function pl(n,e){const t=new Array(e.length),r=e.reduce((i,a,u)=>n.is0(a)?i:(t[u]=i,n.mul(i,a)),n.ONE),o=n.inv(r);return e.reduceRight((i,a,u)=>n.is0(a)?i:(t[u]=n.mul(i,t[u]),n.mul(i,a)),o),t}function ds(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function wl(n,e,t=!1,r={}){if(n<=Ne)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:i}=ds(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=cl(n),u=Object.freeze({ORDER:n,BITS:o,BYTES:i,MASK:fi(o),ZERO:Ne,ONE:Te,create:g=>je(g,n),isValid:g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return Ne<=g&&g<n},is0:g=>g===Ne,isOdd:g=>(g&Te)===Te,neg:g=>je(-g,n),eql:(g,b)=>g===b,sqr:g=>je(g*g,n),add:(g,b)=>je(g+b,n),sub:(g,b)=>je(g-b,n),mul:(g,b)=>je(g*b,n),pow:(g,b)=>gl(u,g,b),div:(g,b)=>je(g*Zr(b,n),n),sqrN:g=>g*g,addN:(g,b)=>g+b,subN:(g,b)=>g-b,mulN:(g,b)=>g*b,inv:g=>Zr(g,n),sqrt:r.sqrt||(g=>a(u,g)),invertBatch:g=>pl(u,g),cmov:(g,b,C)=>C?b:g,toBytes:g=>t?ui(g,i):kt(g,i),fromBytes:g=>{if(g.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${g.length}`);return t?li(g):xt(g)}});return Object.freeze(u)}function hs(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function gs(n){const e=hs(n);return e+Math.ceil(e/2)}function bl(n,e,t=!1){const r=n.length,o=hs(e),i=gs(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=t?xt(n):li(n),u=je(a,e-Te)+Te;return t?ui(u,o):kt(u,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yl=BigInt(0),qr=BigInt(1);function _l(n,e){const t=(o,i)=>{const a=i.negate();return o?a:i},r=o=>{const i=Math.ceil(e/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:t,unsafeLadder(o,i){let a=n.ZERO,u=o;for(;i>yl;)i&qr&&(a=a.add(u)),u=u.double(),i>>=qr;return a},precomputeWindow(o,i){const{windows:a,windowSize:u}=r(i),g=[];let b=o,C=b;for(let x=0;x<a;x++){C=b,g.push(C);for(let R=1;R<u;R++)C=C.add(b),g.push(C);b=C.double()}return g},wNAF(o,i,a){const{windows:u,windowSize:g}=r(o);let b=n.ZERO,C=n.BASE;const x=BigInt(2**o-1),R=2**o,j=BigInt(o);for(let D=0;D<u;D++){const m=D*g;let _=Number(a&x);a>>=j,_>g&&(_-=R,a+=qr);const f=m,c=m+Math.abs(_)-1,v=D%2!==0,B=_<0;_===0?C=C.add(t(v,i[f])):b=b.add(t(B,i[c]))}return{p:b,f:C}},wNAFCached(o,i,a,u){const g=o._WINDOW_SIZE||1;let b=i.get(o);return b||(b=this.precomputeWindow(o,g),g!==1&&i.set(o,u(b))),this.wNAF(g,b,a)}}}function ps(n){return hl(n.Fp),sn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ds(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ml(n){const e=ps(n);sn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:o}=e;if(t){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:El,hexToBytes:Sl}=al,Tt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Tt;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:El(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Tt,t=typeof n=="string"?Sl(n):n;on(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:o,l:i}=Tt._parseInt(t.subarray(2)),{d:a,l:u}=Tt._parseInt(i);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(n){const e=b=>Number.parseInt(b[0],16)&8?"00"+b:b,t=b=>{const C=b.toString(16);return C.length&1?`0${C}`:C},r=e(t(n.s)),o=e(t(n.r)),i=r.length/2,a=o.length/2,u=t(i),g=t(a);return`30${t(a+i+4)}02${g}${o}02${u}${r}`}},ut=BigInt(0),Ve=BigInt(1);BigInt(2);const xo=BigInt(3);BigInt(4);function vl(n){const e=ml(n),{Fp:t}=e,r=e.toBytes||((D,m,_)=>{const f=m.toAffine();return tn(Uint8Array.from([4]),t.toBytes(f.x),t.toBytes(f.y))}),o=e.fromBytes||(D=>{const m=D.subarray(1),_=t.fromBytes(m.subarray(0,t.BYTES)),f=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:_,y:f}});function i(D){const{a:m,b:_}=e,f=t.sqr(D),c=t.mul(f,D);return t.add(t.add(c,t.mul(D,m)),_)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function a(D){return typeof D=="bigint"&&ut<D&&D<e.n}function u(D){if(!a(D))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(D){const{allowedPrivateKeyLengths:m,nByteLength:_,wrapPrivateKey:f,n:c}=e;if(m&&typeof D!="bigint"){if(Ot(D)&&(D=Bt(D)),typeof D!="string"||!m.includes(D.length))throw new Error("Invalid key");D=D.padStart(_*2,"0")}let v;try{v=typeof D=="bigint"?D:xt(Qe("private key",D,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof D}`)}return f&&(v=je(v,c)),u(v),v}const b=new Map;function C(D){if(!(D instanceof x))throw new Error("ProjectivePoint expected")}class x{constructor(m,_,f){if(this.px=m,this.py=_,this.pz=f,m==null||!t.isValid(m))throw new Error("x required");if(_==null||!t.isValid(_))throw new Error("y required");if(f==null||!t.isValid(f))throw new Error("z required")}static fromAffine(m){const{x:_,y:f}=m||{};if(!m||!t.isValid(_)||!t.isValid(f))throw new Error("invalid affine point");if(m instanceof x)throw new Error("projective point not allowed");const c=v=>t.eql(v,t.ZERO);return c(_)&&c(f)?x.ZERO:new x(_,f,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const _=t.invertBatch(m.map(f=>f.pz));return m.map((f,c)=>f.toAffine(_[c])).map(x.fromAffine)}static fromHex(m){const _=x.fromAffine(o(Qe("pointHex",m)));return _.assertValidity(),_}static fromPrivateKey(m){return x.BASE.multiply(g(m))}_setWindowSize(m){this._WINDOW_SIZE=m,b.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:_}=this.toAffine();if(!t.isValid(m)||!t.isValid(_))throw new Error("bad point: x or y not FE");const f=t.sqr(_),c=i(m);if(!t.eql(f,c))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){C(m);const{px:_,py:f,pz:c}=this,{px:v,py:B,pz:N}=m,$=t.eql(t.mul(_,N),t.mul(v,c)),G=t.eql(t.mul(f,N),t.mul(B,c));return $&&G}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:_}=e,f=t.mul(_,xo),{px:c,py:v,pz:B}=this;let N=t.ZERO,$=t.ZERO,G=t.ZERO,s=t.mul(c,c),w=t.mul(v,v),l=t.mul(B,B),d=t.mul(c,v);return d=t.add(d,d),G=t.mul(c,B),G=t.add(G,G),N=t.mul(m,G),$=t.mul(f,l),$=t.add(N,$),N=t.sub(w,$),$=t.add(w,$),$=t.mul(N,$),N=t.mul(d,N),G=t.mul(f,G),l=t.mul(m,l),d=t.sub(s,l),d=t.mul(m,d),d=t.add(d,G),G=t.add(s,s),s=t.add(G,s),s=t.add(s,l),s=t.mul(s,d),$=t.add($,s),l=t.mul(v,B),l=t.add(l,l),s=t.mul(l,d),N=t.sub(N,s),G=t.mul(l,w),G=t.add(G,G),G=t.add(G,G),new x(N,$,G)}add(m){C(m);const{px:_,py:f,pz:c}=this,{px:v,py:B,pz:N}=m;let $=t.ZERO,G=t.ZERO,s=t.ZERO;const w=e.a,l=t.mul(e.b,xo);let d=t.mul(_,v),y=t.mul(f,B),h=t.mul(c,N),L=t.add(_,f),p=t.add(v,B);L=t.mul(L,p),p=t.add(d,y),L=t.sub(L,p),p=t.add(_,c);let A=t.add(v,N);return p=t.mul(p,A),A=t.add(d,h),p=t.sub(p,A),A=t.add(f,c),$=t.add(B,N),A=t.mul(A,$),$=t.add(y,h),A=t.sub(A,$),s=t.mul(w,p),$=t.mul(l,h),s=t.add($,s),$=t.sub(y,s),s=t.add(y,s),G=t.mul($,s),y=t.add(d,d),y=t.add(y,d),h=t.mul(w,h),p=t.mul(l,p),y=t.add(y,h),h=t.sub(d,h),h=t.mul(w,h),p=t.add(p,h),d=t.mul(y,p),G=t.add(G,d),d=t.mul(A,p),$=t.mul(L,$),$=t.sub($,d),d=t.mul(L,y),s=t.mul(A,s),s=t.add(s,d),new x($,G,s)}subtract(m){return this.add(m.negate())}is0(){return this.equals(x.ZERO)}wNAF(m){return j.wNAFCached(this,b,m,_=>{const f=t.invertBatch(_.map(c=>c.pz));return _.map((c,v)=>c.toAffine(f[v])).map(x.fromAffine)})}multiplyUnsafe(m){const _=x.ZERO;if(m===ut)return _;if(u(m),m===Ve)return this;const{endo:f}=e;if(!f)return j.unsafeLadder(this,m);let{k1neg:c,k1:v,k2neg:B,k2:N}=f.splitScalar(m),$=_,G=_,s=this;for(;v>ut||N>ut;)v&Ve&&($=$.add(s)),N&Ve&&(G=G.add(s)),s=s.double(),v>>=Ve,N>>=Ve;return c&&($=$.negate()),B&&(G=G.negate()),G=new x(t.mul(G.px,f.beta),G.py,G.pz),$.add(G)}multiply(m){u(m);let _=m,f,c;const{endo:v}=e;if(v){const{k1neg:B,k1:N,k2neg:$,k2:G}=v.splitScalar(_);let{p:s,f:w}=this.wNAF(N),{p:l,f:d}=this.wNAF(G);s=j.constTimeNegate(B,s),l=j.constTimeNegate($,l),l=new x(t.mul(l.px,v.beta),l.py,l.pz),f=s.add(l),c=w.add(d)}else{const{p:B,f:N}=this.wNAF(_);f=B,c=N}return x.normalizeZ([f,c])[0]}multiplyAndAddUnsafe(m,_,f){const c=x.BASE,v=(N,$)=>$===ut||$===Ve||!N.equals(c)?N.multiplyUnsafe($):N.multiply($),B=v(this,_).add(v(m,f));return B.is0()?void 0:B}toAffine(m){const{px:_,py:f,pz:c}=this,v=this.is0();m==null&&(m=v?t.ONE:t.inv(c));const B=t.mul(_,m),N=t.mul(f,m),$=t.mul(c,m);if(v)return{x:t.ZERO,y:t.ZERO};if(!t.eql($,t.ONE))throw new Error("invZ was invalid");return{x:B,y:N}}isTorsionFree(){const{h:m,isTorsionFree:_}=e;if(m===Ve)return!0;if(_)return _(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:_}=e;return m===Ve?this:_?_(x,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(x,this,m)}toHex(m=!0){return Bt(this.toRawBytes(m))}}x.BASE=new x(e.Gx,e.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO);const R=e.nBitLength,j=_l(x,e.endo?Math.ceil(R/2):R);return{CURVE:e,ProjectivePoint:x,normPrivateKeyToScalar:g,weierstrassEquation:i,isWithinCurveOrder:a}}function Al(n){const e=ps(n);return sn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Rl(n){const e=Al(n),{Fp:t,n:r}=e,o=t.BYTES+1,i=2*t.BYTES+1;function a(p){return ut<p&&p<t.ORDER}function u(p){return je(p,r)}function g(p){return Zr(p,r)}const{ProjectivePoint:b,normPrivateKeyToScalar:C,weierstrassEquation:x,isWithinCurveOrder:R}=vl({...e,toBytes(p,A,P){const E=A.toAffine(),k=t.toBytes(E.x),S=tn;return P?S(Uint8Array.from([A.hasEvenY()?2:3]),k):S(Uint8Array.from([4]),k,t.toBytes(E.y))},fromBytes(p){const A=p.length,P=p[0],E=p.subarray(1);if(A===o&&(P===2||P===3)){const k=xt(E);if(!a(k))throw new Error("Point is not on curve");const S=x(k);let F;try{F=t.sqrt(S)}catch(ee){const Q=ee instanceof Error?": "+ee.message:"";throw new Error("Point is not on curve"+Q)}const J=(F&Ve)===Ve;return(P&1)===1!==J&&(F=t.neg(F)),{x:k,y:F}}else if(A===i&&P===4){const k=t.fromBytes(E.subarray(0,t.BYTES)),S=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:k,y:S}}else throw new Error(`Point of length ${A} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),j=p=>Bt(kt(p,e.nByteLength));function D(p){const A=r>>Ve;return p>A}function m(p){return D(p)?u(-p):p}const _=(p,A,P)=>xt(p.slice(A,P));class f{constructor(A,P,E){this.r=A,this.s=P,this.recovery=E,this.assertValidity()}static fromCompact(A){const P=e.nByteLength;return A=Qe("compactSignature",A,P*2),new f(_(A,0,P),_(A,P,2*P))}static fromDER(A){const{r:P,s:E}=Tt.toSig(Qe("DER",A));return new f(P,E)}assertValidity(){if(!R(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!R(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new f(this.r,this.s,A)}recoverPublicKey(A){const{r:P,s:E,recovery:k}=this,S=G(Qe("msgHash",A));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const F=k===2||k===3?P+e.n:P;if(F>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const J=(k&1)===0?"02":"03",H=b.fromHex(J+j(F)),ee=g(F),Q=u(-S*ee),le=u(E*ee),ue=b.BASE.multiplyAndAddUnsafe(H,Q,le);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return D(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Dt(this.toDERHex())}toDERHex(){return Tt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dt(this.toCompactHex())}toCompactHex(){return j(this.r)+j(this.s)}}const c={isValidPrivateKey(p){try{return C(p),!0}catch{return!1}},normPrivateKeyToScalar:C,randomPrivateKey:()=>{const p=gs(e.n);return bl(e.randomBytes(p),e.n)},precompute(p=8,A=b.BASE){return A._setWindowSize(p),A.multiply(BigInt(3)),A}};function v(p,A=!0){return b.fromPrivateKey(p).toRawBytes(A)}function B(p){const A=Ot(p),P=typeof p=="string",E=(A||P)&&p.length;return A?E===o||E===i:P?E===2*o||E===2*i:p instanceof b}function N(p,A,P=!0){if(B(p))throw new Error("first arg must be private key");if(!B(A))throw new Error("second arg must be public key");return b.fromHex(A).multiply(C(p)).toRawBytes(P)}const $=e.bits2int||function(p){const A=xt(p),P=p.length*8-e.nBitLength;return P>0?A>>BigInt(P):A},G=e.bits2int_modN||function(p){return u($(p))},s=fi(e.nBitLength);function w(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(ut<=p&&p<s))throw new Error(`bigint expected < 2^${e.nBitLength}`);return kt(p,e.nByteLength)}function l(p,A,P=d){if(["recovered","canonical"].some(Y=>Y in P))throw new Error("sign() legacy options not supported");const{hash:E,randomBytes:k}=e;let{lowS:S,prehash:F,extraEntropy:J}=P;S==null&&(S=!0),p=Qe("msgHash",p),F&&(p=Qe("prehashed msgHash",E(p)));const H=G(p),ee=C(A),Q=[w(ee),w(H)];if(J!=null&&J!==!1){const Y=J===!0?k(t.BYTES):J;Q.push(Qe("extraEntropy",Y))}const le=tn(...Q),ue=H;function K(Y){const oe=$(Y);if(!R(oe))return;const fe=g(oe),ce=b.BASE.multiply(oe).toAffine(),M=u(ce.x);if(M===ut)return;const U=u(fe*u(ue+M*ee));if(U===ut)return;let z=(ce.x===M?0:2)|Number(ce.y&Ve),re=U;return S&&D(U)&&(re=m(U),z^=1),new f(M,re,z)}return{seed:le,k2sig:K}}const d={lowS:e.lowS,prehash:!1},y={lowS:e.lowS,prehash:!1};function h(p,A,P=d){const{seed:E,k2sig:k}=l(p,A,P),S=e;return cs(S.hash.outputLen,S.nByteLength,S.hmac)(E,k)}b.BASE._setWindowSize(8);function L(p,A,P,E=y){var ce;const k=p;if(A=Qe("msgHash",A),P=Qe("publicKey",P),"strict"in E)throw new Error("options.strict was renamed to lowS");const{lowS:S,prehash:F}=E;let J,H;try{if(typeof k=="string"||Ot(k))try{J=f.fromDER(k)}catch(M){if(!(M instanceof Tt.Err))throw M;J=f.fromCompact(k)}else if(typeof k=="object"&&typeof k.r=="bigint"&&typeof k.s=="bigint"){const{r:M,s:U}=k;J=new f(M,U)}else throw new Error("PARSE");H=b.fromHex(P)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&J.hasHighS())return!1;F&&(A=e.hash(A));const{r:ee,s:Q}=J,le=G(A),ue=g(Q),K=u(le*ue),Y=u(ee*ue),oe=(ce=b.BASE.multiplyAndAddUnsafe(H,K,Y))==null?void 0:ce.toAffine();return oe?u(oe.x)===ee:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:N,sign:h,verify:L,ProjectivePoint:b,Signature:f,utils:c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Il(n){return{hash:n,hmac:(e,...t)=>ls(n,e,Fa(...t)),randomBytes:Ha}}function Tl(n,e){const t=r=>Rl({...n,...Il(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Oo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xl=BigInt(1),Xr=BigInt(2),No=(n,e)=>(n+e/Xr)/e;function Ol(n){const e=ws,t=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),g=BigInt(88),b=n*n*n%e,C=b*b*n%e,x=$e(C,t,e)*C%e,R=$e(x,t,e)*C%e,j=$e(R,Xr,e)*b%e,D=$e(j,o,e)*j%e,m=$e(D,i,e)*D%e,_=$e(m,u,e)*m%e,f=$e(_,g,e)*_%e,c=$e(f,u,e)*m%e,v=$e(c,t,e)*C%e,B=$e(v,a,e)*D%e,N=$e(B,r,e)*b%e,$=$e(N,Xr,e);if(!Qr.eql(Qr.sqr($),n))throw new Error("Cannot find square root");return $}const Qr=wl(ws,void 0,void 0,{sqrt:Ol}),ci=Tl({a:BigInt(0),b:BigInt(7),Fp:Qr,n:Oo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Oo,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,a=BigInt("0x100000000000000000000000000000000"),u=No(i*n,e),g=No(-r*n,e);let b=je(n-u*t-g*o,e),C=je(-u*r-g*i,e);const x=b>a,R=C>a;if(x&&(b=e-b),R&&(C=e-C),b>a||C>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:x,k1:b,k2neg:R,k2:C}}}},Za);BigInt(0);ci.ProjectivePoint;function Nl(n){let e=n;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const ei={},ti={};for(let n=0;n<16;n++){const e=n,t=n*16,r=n.toString(16).toLowerCase();ti[r]=e,ti[r.toUpperCase()]=e,ei[r]=t,ei[r.toUpperCase()]=t}function Cl(n){const e=n.length,t=new Uint8Array(e/2);for(let r=0;r<e;r+=2)t[r/2]=ei[n[r]]+ti[n[r+1]];return t}Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));for(let n=0;n<=256*256-1;n++)BigInt(n);const Hn=n=>{if(typeof n!="string")throw new Error(`hex argument type ${typeof n} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(n))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${n}`);const e=n.slice(2);return Cl(e.length%2===0?e:Nl(e))},Ll=n=>{if(!Number.isSafeInteger(n)||n<0)throw new Error(`Received an invalid integer type: ${n}`);return`0x${n.toString(16)}`},an=n=>{const e=Ll(n);return Hn(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");ci.CURVE.n;ci.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Pl="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Hn(Pl);const Ml="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Hn(Ml);const Bl="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Hn(Bl);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));var Co;(function(n){n.String="string",n.Bytes="view",n.Number="number"})(Co||(Co={}));var Lo;(function(n){n.String="string",n.Bytes="view",n.JSON="json"})(Lo||(Lo={}));var Po;(function(n){n[n.Number=0]="Number",n[n.BigInt=1]="BigInt",n[n.Uint8Array=2]="Uint8Array",n[n.PrefixedHexString=3]="PrefixedHexString"})(Po||(Po={}));var Mo;(function(n){n[n.Deposit=0]="Deposit",n[n.Withdrawal=1]="Withdrawal",n[n.Consolidation=2]="Consolidation"})(Mo||(Mo={}));var Nt;(function(n){n[n.Version=0]="Version",n[n.Balance=1]="Balance",n[n.Nonce=2]="Nonce",n[n.CodeHash=3]="CodeHash",n[n.CodeSize=4]="CodeSize"})(Nt||(Nt={}));an(Nt.Version);an(Nt.Balance);an(Nt.Nonce);an(Nt.CodeHash);an(Nt.CodeSize);BigInt(256)**BigInt(31);var Wr={exports:{}},Tn={},xn={},Bo;function Dl(){if(Bo)return xn;Bo=1,Object.defineProperty(xn,"__esModule",{value:!0});function n(e){var t=4,r=e.length,o=r%t;if(!o)return e;var i=r,a=t-o,u=r+a,g=Buffer.alloc(u);for(g.write(e);a--;)g.write("=",i++);return g.toString()}return xn.default=n,xn}var Do;function kl(){if(Do)return Tn;Do=1,Object.defineProperty(Tn,"__esModule",{value:!0});var n=Dl();function e(u,g){return g===void 0&&(g="utf8"),Buffer.isBuffer(u)?o(u.toString("base64")):o(Buffer.from(u,g).toString("base64"))}function t(u,g){return g===void 0&&(g="utf8"),Buffer.from(r(u),"base64").toString(g)}function r(u){return u=u.toString(),n.default(u).replace(/\-/g,"+").replace(/_/g,"/")}function o(u){return u.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function i(u){return Buffer.from(r(u),"base64")}var a=e;return a.encode=e,a.decode=t,a.toBase64=r,a.fromBase64=o,a.toBuffer=i,Tn.default=a,Tn}var ko;function Ul(){return ko||(ko=1,function(n){n.exports=kl().default,n.exports.default=n.exports}(Wr)),Wr.exports}Ul();const Se={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},bt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.AQUA+"",bt.SAPPHIRE_MAINNET,Se.CELESTE+"",bt.SAPPHIRE_MAINNET,Se.CYAN+"",bt.SAPPHIRE_MAINNET,Se.MAINNET+"",bt.SAPPHIRE_MAINNET,Se.TESTNET+"",bt.SAPPHIRE_DEVNET;Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";bt.SAPPHIRE_MAINNET+"",bt.SAPPHIRE_DEVNET+"",Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";function Uo(n){let e=!1,t=0,r;try{r=window[n],e=!0,t=r.length;const o="__storage_test__";return r.setItem(o,o),r.removeItem(o),!0}catch(o){const i=o;return i&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class jl{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class ql{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let r;t==="local"&&Uo("localStorage")?r=window.localStorage:t==="session"&&Uo("sessionStorage")?r=window.sessionStorage:r=new jl,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}}ge(ql,"instanceMap",new Map);Ke(Ke({},bt),Se);var Wl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Fr=Math.ceil,ze=Math.floor,Ue="[BigNumber Error] ",jo=Ue+"Number primitive has more than 15 significant digits: ",Xe=1e14,pe=14,qo=9007199254740991,$r=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],wt=1e7,Fe=1e9;function bs(n){var e,t,r,o=c.prototype={constructor:c,toString:null,valueOf:null},i=new c(1),a=20,u=4,g=-7,b=21,C=-1e7,x=1e7,R=!1,j=1,D=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",f=!0;function c(s,w){var l,d,y,h,L,p,A,P,E=this;if(!(E instanceof c))return new c(s,w);if(w==null){if(s&&s._isBigNumber===!0){E.s=s.s,!s.c||s.e>x?E.c=E.e=null:s.e<C?E.c=[E.e=0]:(E.e=s.e,E.c=s.c.slice());return}if((p=typeof s=="number")&&s*0==0){if(E.s=1/s<0?(s=-s,-1):1,s===~~s){for(h=0,L=s;L>=10;L/=10,h++);h>x?E.c=E.e=null:(E.e=h,E.c=[s]);return}P=String(s)}else{if(!Wl.test(P=String(s)))return r(E,P,p);E.s=P.charCodeAt(0)==45?(P=P.slice(1),-1):1}(h=P.indexOf("."))>-1&&(P=P.replace(".","")),(L=P.search(/e/i))>0?(h<0&&(h=L),h+=+P.slice(L+1),P=P.substring(0,L)):h<0&&(h=P.length)}else{if(Re(w,2,_.length,"Base"),w==10&&f)return E=new c(s),$(E,a+E.e+1,u);if(P=String(s),p=typeof s=="number"){if(s*0!=0)return r(E,P,p,w);if(E.s=1/s<0?(P=P.slice(1),-1):1,c.DEBUG&&P.replace(/^0\.0*|\./,"").length>15)throw Error(jo+s)}else E.s=P.charCodeAt(0)===45?(P=P.slice(1),-1):1;for(l=_.slice(0,w),h=L=0,A=P.length;L<A;L++)if(l.indexOf(d=P.charAt(L))<0){if(d=="."){if(L>h){h=A;continue}}else if(!y&&(P==P.toUpperCase()&&(P=P.toLowerCase())||P==P.toLowerCase()&&(P=P.toUpperCase()))){y=!0,L=-1,h=0;continue}return r(E,String(s),p,w)}p=!1,P=t(P,w,10,E.s),(h=P.indexOf("."))>-1?P=P.replace(".",""):h=P.length}for(L=0;P.charCodeAt(L)===48;L++);for(A=P.length;P.charCodeAt(--A)===48;);if(P=P.slice(L,++A)){if(A-=L,p&&c.DEBUG&&A>15&&(s>qo||s!==ze(s)))throw Error(jo+E.s*s);if((h=h-L-1)>x)E.c=E.e=null;else if(h<C)E.c=[E.e=0];else{if(E.e=h,E.c=[],L=(h+1)%pe,h<0&&(L+=pe),L<A){for(L&&E.c.push(+P.slice(0,L)),A-=pe;L<A;)E.c.push(+P.slice(L,L+=pe));L=pe-(P=P.slice(L)).length}else L-=A;for(;L--;P+="0");E.c.push(+P)}}else E.c=[E.e=0]}c.clone=bs,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(s){var w,l;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(w="DECIMAL_PLACES")&&(l=s[w],Re(l,0,Fe,w),a=l),s.hasOwnProperty(w="ROUNDING_MODE")&&(l=s[w],Re(l,0,8,w),u=l),s.hasOwnProperty(w="EXPONENTIAL_AT")&&(l=s[w],l&&l.pop?(Re(l[0],-1e9,0,w),Re(l[1],0,Fe,w),g=l[0],b=l[1]):(Re(l,-1e9,Fe,w),g=-(b=l<0?-l:l))),s.hasOwnProperty(w="RANGE"))if(l=s[w],l&&l.pop)Re(l[0],-1e9,-1,w),Re(l[1],1,Fe,w),C=l[0],x=l[1];else if(Re(l,-1e9,Fe,w),l)C=-(x=l<0?-l:l);else throw Error(Ue+w+" cannot be zero: "+l);if(s.hasOwnProperty(w="CRYPTO"))if(l=s[w],l===!!l)if(l)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))R=l;else throw R=!l,Error(Ue+"crypto unavailable");else R=l;else throw Error(Ue+w+" not true or false: "+l);if(s.hasOwnProperty(w="MODULO_MODE")&&(l=s[w],Re(l,0,9,w),j=l),s.hasOwnProperty(w="POW_PRECISION")&&(l=s[w],Re(l,0,Fe,w),D=l),s.hasOwnProperty(w="FORMAT"))if(l=s[w],typeof l=="object")m=l;else throw Error(Ue+w+" not an object: "+l);if(s.hasOwnProperty(w="ALPHABET"))if(l=s[w],typeof l=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(l))f=l.slice(0,10)=="0123456789",_=l;else throw Error(Ue+w+" invalid: "+l)}else throw Error(Ue+"Object expected: "+s);return{DECIMAL_PLACES:a,ROUNDING_MODE:u,EXPONENTIAL_AT:[g,b],RANGE:[C,x],CRYPTO:R,MODULO_MODE:j,POW_PRECISION:D,FORMAT:m,ALPHABET:_}},c.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var w,l,d=s.c,y=s.e,h=s.s;e:if({}.toString.call(d)=="[object Array]"){if((h===1||h===-1)&&y>=-1e9&&y<=Fe&&y===ze(y)){if(d[0]===0){if(y===0&&d.length===1)return!0;break e}if(w=(y+1)%pe,w<1&&(w+=pe),String(d[0]).length==w){for(w=0;w<d.length;w++)if(l=d[w],l<0||l>=Xe||l!==ze(l))break e;if(l!==0)return!0}}}else if(d===null&&y===null&&(h===null||h===1||h===-1))return!0;throw Error(Ue+"Invalid BigNumber: "+s)},c.maximum=c.max=function(){return B(arguments,-1)},c.minimum=c.min=function(){return B(arguments,1)},c.random=function(){var s=9007199254740992,w=Math.random()*s&2097151?function(){return ze(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(l){var d,y,h,L,p,A=0,P=[],E=new c(i);if(l==null?l=a:Re(l,0,Fe),L=Fr(l/pe),R)if(crypto.getRandomValues){for(d=crypto.getRandomValues(new Uint32Array(L*=2));A<L;)p=d[A]*131072+(d[A+1]>>>11),p>=9e15?(y=crypto.getRandomValues(new Uint32Array(2)),d[A]=y[0],d[A+1]=y[1]):(P.push(p%1e14),A+=2);A=L/2}else if(crypto.randomBytes){for(d=crypto.randomBytes(L*=7);A<L;)p=(d[A]&31)*281474976710656+d[A+1]*1099511627776+d[A+2]*4294967296+d[A+3]*16777216+(d[A+4]<<16)+(d[A+5]<<8)+d[A+6],p>=9e15?crypto.randomBytes(7).copy(d,A):(P.push(p%1e14),A+=7);A=L/7}else throw R=!1,Error(Ue+"crypto unavailable");if(!R)for(;A<L;)p=w(),p<9e15&&(P[A++]=p%1e14);for(L=P[--A],l%=pe,L&&l&&(p=$r[pe-l],P[A]=ze(L/p)*p);P[A]===0;P.pop(),A--);if(A<0)P=[h=0];else{for(h=-1;P[0]===0;P.splice(0,1),h-=pe);for(A=1,p=P[0];p>=10;p/=10,A++);A<pe&&(h-=pe-A)}return E.e=h,E.c=P,E}}(),c.sum=function(){for(var s=1,w=arguments,l=new c(w[0]);s<w.length;)l=l.plus(w[s++]);return l},t=function(){var s="0123456789";function w(l,d,y,h){for(var L,p=[0],A,P=0,E=l.length;P<E;){for(A=p.length;A--;p[A]*=d);for(p[0]+=h.indexOf(l.charAt(P++)),L=0;L<p.length;L++)p[L]>y-1&&(p[L+1]==null&&(p[L+1]=0),p[L+1]+=p[L]/y|0,p[L]%=y)}return p.reverse()}return function(l,d,y,h,L){var p,A,P,E,k,S,F,J,H=l.indexOf("."),ee=a,Q=u;for(H>=0&&(E=D,D=0,l=l.replace(".",""),J=new c(d),S=J.pow(l.length-H),D=E,J.c=w(at(He(S.c),S.e,"0"),10,y,s),J.e=J.c.length),F=w(l,d,y,L?(p=_,s):(p=s,_)),P=E=F.length;F[--E]==0;F.pop());if(!F[0])return p.charAt(0);if(H<0?--P:(S.c=F,S.e=P,S.s=h,S=e(S,J,ee,Q,y),F=S.c,k=S.r,P=S.e),A=P+ee+1,H=F[A],E=y/2,k=k||A<0||F[A+1]!=null,k=Q<4?(H!=null||k)&&(Q==0||Q==(S.s<0?3:2)):H>E||H==E&&(Q==4||k||Q==6&&F[A-1]&1||Q==(S.s<0?8:7)),A<1||!F[0])l=k?at(p.charAt(1),-ee,p.charAt(0)):p.charAt(0);else{if(F.length=A,k)for(--y;++F[--A]>y;)F[A]=0,A||(++P,F=[1].concat(F));for(E=F.length;!F[--E];);for(H=0,l="";H<=E;l+=p.charAt(F[H++]));l=at(l,P,p.charAt(0))}return l}}(),e=function(){function s(d,y,h){var L,p,A,P,E=0,k=d.length,S=y%wt,F=y/wt|0;for(d=d.slice();k--;)A=d[k]%wt,P=d[k]/wt|0,L=F*A+P*S,p=S*A+L%wt*wt+E,E=(p/h|0)+(L/wt|0)+F*P,d[k]=p%h;return E&&(d=[E].concat(d)),d}function w(d,y,h,L){var p,A;if(h!=L)A=h>L?1:-1;else for(p=A=0;p<h;p++)if(d[p]!=y[p]){A=d[p]>y[p]?1:-1;break}return A}function l(d,y,h,L){for(var p=0;h--;)d[h]-=p,p=d[h]<y[h]?1:0,d[h]=p*L+d[h]-y[h];for(;!d[0]&&d.length>1;d.splice(0,1));}return function(d,y,h,L,p){var A,P,E,k,S,F,J,H,ee,Q,le,ue,K,Y,oe,fe,ce,M=d.s==y.s?1:-1,U=d.c,z=y.c;if(!U||!U[0]||!z||!z[0])return new c(!d.s||!y.s||(U?z&&U[0]==z[0]:!z)?NaN:U&&U[0]==0||!z?M*0:M/0);for(H=new c(M),ee=H.c=[],P=d.e-y.e,M=h+P+1,p||(p=Xe,P=Ge(d.e/pe)-Ge(y.e/pe),M=M/pe|0),E=0;z[E]==(U[E]||0);E++);if(z[E]>(U[E]||0)&&P--,M<0)ee.push(1),k=!0;else{for(Y=U.length,fe=z.length,E=0,M+=2,S=ze(p/(z[0]+1)),S>1&&(z=s(z,S,p),U=s(U,S,p),fe=z.length,Y=U.length),K=fe,Q=U.slice(0,fe),le=Q.length;le<fe;Q[le++]=0);ce=z.slice(),ce=[0].concat(ce),oe=z[0],z[1]>=p/2&&oe++;do{if(S=0,A=w(z,Q,fe,le),A<0){if(ue=Q[0],fe!=le&&(ue=ue*p+(Q[1]||0)),S=ze(ue/oe),S>1)for(S>=p&&(S=p-1),F=s(z,S,p),J=F.length,le=Q.length;w(F,Q,J,le)==1;)S--,l(F,fe<J?ce:z,J,p),J=F.length,A=1;else S==0&&(A=S=1),F=z.slice(),J=F.length;if(J<le&&(F=[0].concat(F)),l(Q,F,le,p),le=Q.length,A==-1)for(;w(z,Q,fe,le)<1;)S++,l(Q,fe<le?ce:z,le,p),le=Q.length}else A===0&&(S++,Q=[0]);ee[E++]=S,Q[0]?Q[le++]=U[K]||0:(Q=[U[K]],le=1)}while((K++<Y||Q[0]!=null)&&M--);k=Q[0]!=null,ee[0]||ee.splice(0,1)}if(p==Xe){for(E=1,M=ee[0];M>=10;M/=10,E++);$(H,h+(H.e=E+P*pe-1)+1,L,k)}else H.e=P,H.r=+k;return H}}();function v(s,w,l,d){var y,h,L,p,A;if(l==null?l=u:Re(l,0,8),!s.c)return s.toString();if(y=s.c[0],L=s.e,w==null)A=He(s.c),A=d==1||d==2&&(L<=g||L>=b)?Nn(A,L):at(A,L,"0");else if(s=$(new c(s),w,l),h=s.e,A=He(s.c),p=A.length,d==1||d==2&&(w<=h||h<=g)){for(;p<w;A+="0",p++);A=Nn(A,h)}else if(w-=L,A=at(A,h,"0"),h+1>p){if(--w>0)for(A+=".";w--;A+="0");}else if(w+=h-p,w>0)for(h+1==p&&(A+=".");w--;A+="0");return s.s<0&&y?"-"+A:A}function B(s,w){for(var l,d,y=1,h=new c(s[0]);y<s.length;y++)d=new c(s[y]),(!d.s||(l=vt(h,d))===w||l===0&&h.s===w)&&(h=d);return h}function N(s,w,l){for(var d=1,y=w.length;!w[--y];w.pop());for(y=w[0];y>=10;y/=10,d++);return(l=d+l*pe-1)>x?s.c=s.e=null:l<C?s.c=[s.e=0]:(s.e=l,s.c=w),s}r=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,l=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(h,L,p,A){var P,E=p?L:L.replace(y,"");if(d.test(E))h.s=isNaN(E)?null:E<0?-1:1;else{if(!p&&(E=E.replace(s,function(k,S,F){return P=(F=F.toLowerCase())=="x"?16:F=="b"?2:8,!A||A==P?S:k}),A&&(P=A,E=E.replace(w,"$1").replace(l,"0.$1")),L!=E))return new c(E,P);if(c.DEBUG)throw Error(Ue+"Not a"+(A?" base "+A:"")+" number: "+L);h.s=null}h.c=h.e=null}}();function $(s,w,l,d){var y,h,L,p,A,P,E,k=s.c,S=$r;if(k){e:{for(y=1,p=k[0];p>=10;p/=10,y++);if(h=w-y,h<0)h+=pe,L=w,A=k[P=0],E=ze(A/S[y-L-1]%10);else if(P=Fr((h+1)/pe),P>=k.length)if(d){for(;k.length<=P;k.push(0));A=E=0,y=1,h%=pe,L=h-pe+1}else break e;else{for(A=p=k[P],y=1;p>=10;p/=10,y++);h%=pe,L=h-pe+y,E=L<0?0:ze(A/S[y-L-1]%10)}if(d=d||w<0||k[P+1]!=null||(L<0?A:A%S[y-L-1]),d=l<4?(E||d)&&(l==0||l==(s.s<0?3:2)):E>5||E==5&&(l==4||d||l==6&&(h>0?L>0?A/S[y-L]:0:k[P-1])%10&1||l==(s.s<0?8:7)),w<1||!k[0])return k.length=0,d?(w-=s.e+1,k[0]=S[(pe-w%pe)%pe],s.e=-w||0):k[0]=s.e=0,s;if(h==0?(k.length=P,p=1,P--):(k.length=P+1,p=S[pe-h],k[P]=L>0?ze(A/S[y-L]%S[L])*p:0),d)for(;;)if(P==0){for(h=1,L=k[0];L>=10;L/=10,h++);for(L=k[0]+=p,p=1;L>=10;L/=10,p++);h!=p&&(s.e++,k[0]==Xe&&(k[0]=1));break}else{if(k[P]+=p,k[P]!=Xe)break;k[P--]=0,p=1}for(h=k.length;k[--h]===0;k.pop());}s.e>x?s.c=s.e=null:s.e<C&&(s.c=[s.e=0])}return s}function G(s){var w,l=s.e;return l===null?s.toString():(w=He(s.c),w=l<=g||l>=b?Nn(w,l):at(w,l,"0"),s.s<0?"-"+w:w)}return o.absoluteValue=o.abs=function(){var s=new c(this);return s.s<0&&(s.s=1),s},o.comparedTo=function(s,w){return vt(this,new c(s,w))},o.decimalPlaces=o.dp=function(s,w){var l,d,y,h=this;if(s!=null)return Re(s,0,Fe),w==null?w=u:Re(w,0,8),$(new c(h),s+h.e+1,w);if(!(l=h.c))return null;if(d=((y=l.length-1)-Ge(this.e/pe))*pe,y=l[y])for(;y%10==0;y/=10,d--);return d<0&&(d=0),d},o.dividedBy=o.div=function(s,w){return e(this,new c(s,w),a,u)},o.dividedToIntegerBy=o.idiv=function(s,w){return e(this,new c(s,w),0,1)},o.exponentiatedBy=o.pow=function(s,w){var l,d,y,h,L,p,A,P,E,k=this;if(s=new c(s),s.c&&!s.isInteger())throw Error(Ue+"Exponent not an integer: "+G(s));if(w!=null&&(w=new c(w)),p=s.e>14,!k.c||!k.c[0]||k.c[0]==1&&!k.e&&k.c.length==1||!s.c||!s.c[0])return E=new c(Math.pow(+G(k),p?s.s*(2-On(s)):+G(s))),w?E.mod(w):E;if(A=s.s<0,w){if(w.c?!w.c[0]:!w.s)return new c(NaN);d=!A&&k.isInteger()&&w.isInteger(),d&&(k=k.mod(w))}else{if(s.e>9&&(k.e>0||k.e<-1||(k.e==0?k.c[0]>1||p&&k.c[1]>=24e7:k.c[0]<8e13||p&&k.c[0]<=9999975e7)))return h=k.s<0&&On(s)?-0:0,k.e>-1&&(h=1/h),new c(A?1/h:h);D&&(h=Fr(D/pe+2))}for(p?(l=new c(.5),A&&(s.s=1),P=On(s)):(y=Math.abs(+G(s)),P=y%2),E=new c(i);;){if(P){if(E=E.times(k),!E.c)break;h?E.c.length>h&&(E.c.length=h):d&&(E=E.mod(w))}if(y){if(y=ze(y/2),y===0)break;P=y%2}else if(s=s.times(l),$(s,s.e+1,1),s.e>14)P=On(s);else{if(y=+G(s),y===0)break;P=y%2}k=k.times(k),h?k.c&&k.c.length>h&&(k.c.length=h):d&&(k=k.mod(w))}return d?E:(A&&(E=i.div(E)),w?E.mod(w):h?$(E,D,u,L):E)},o.integerValue=function(s){var w=new c(this);return s==null?s=u:Re(s,0,8),$(w,w.e+1,s)},o.isEqualTo=o.eq=function(s,w){return vt(this,new c(s,w))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(s,w){return vt(this,new c(s,w))>0},o.isGreaterThanOrEqualTo=o.gte=function(s,w){return(w=vt(this,new c(s,w)))===1||w===0},o.isInteger=function(){return!!this.c&&Ge(this.e/pe)>this.c.length-2},o.isLessThan=o.lt=function(s,w){return vt(this,new c(s,w))<0},o.isLessThanOrEqualTo=o.lte=function(s,w){return(w=vt(this,new c(s,w)))===-1||w===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(s,w){var l,d,y,h,L=this,p=L.s;if(s=new c(s,w),w=s.s,!p||!w)return new c(NaN);if(p!=w)return s.s=-w,L.plus(s);var A=L.e/pe,P=s.e/pe,E=L.c,k=s.c;if(!A||!P){if(!E||!k)return E?(s.s=-w,s):new c(k?L:NaN);if(!E[0]||!k[0])return k[0]?(s.s=-w,s):new c(E[0]?L:u==3?-0:0)}if(A=Ge(A),P=Ge(P),E=E.slice(),p=A-P){for((h=p<0)?(p=-p,y=E):(P=A,y=k),y.reverse(),w=p;w--;y.push(0));y.reverse()}else for(d=(h=(p=E.length)<(w=k.length))?p:w,p=w=0;w<d;w++)if(E[w]!=k[w]){h=E[w]<k[w];break}if(h&&(y=E,E=k,k=y,s.s=-s.s),w=(d=k.length)-(l=E.length),w>0)for(;w--;E[l++]=0);for(w=Xe-1;d>p;){if(E[--d]<k[d]){for(l=d;l&&!E[--l];E[l]=w);--E[l],E[d]+=Xe}E[d]-=k[d]}for(;E[0]==0;E.splice(0,1),--P);return E[0]?N(s,E,P):(s.s=u==3?-1:1,s.c=[s.e=0],s)},o.modulo=o.mod=function(s,w){var l,d,y=this;return s=new c(s,w),!y.c||!s.s||s.c&&!s.c[0]?new c(NaN):!s.c||y.c&&!y.c[0]?new c(y):(j==9?(d=s.s,s.s=1,l=e(y,s,0,3),s.s=d,l.s*=d):l=e(y,s,0,j),s=y.minus(l.times(s)),!s.c[0]&&j==1&&(s.s=y.s),s)},o.multipliedBy=o.times=function(s,w){var l,d,y,h,L,p,A,P,E,k,S,F,J,H,ee,Q=this,le=Q.c,ue=(s=new c(s,w)).c;if(!le||!ue||!le[0]||!ue[0])return!Q.s||!s.s||le&&!le[0]&&!ue||ue&&!ue[0]&&!le?s.c=s.e=s.s=null:(s.s*=Q.s,!le||!ue?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(d=Ge(Q.e/pe)+Ge(s.e/pe),s.s*=Q.s,A=le.length,k=ue.length,A<k&&(J=le,le=ue,ue=J,y=A,A=k,k=y),y=A+k,J=[];y--;J.push(0));for(H=Xe,ee=wt,y=k;--y>=0;){for(l=0,S=ue[y]%ee,F=ue[y]/ee|0,L=A,h=y+L;h>y;)P=le[--L]%ee,E=le[L]/ee|0,p=F*P+E*S,P=S*P+p%ee*ee+J[h]+l,l=(P/H|0)+(p/ee|0)+F*E,J[h--]=P%H;J[h]=l}return l?++d:J.splice(0,1),N(s,J,d)},o.negated=function(){var s=new c(this);return s.s=-s.s||null,s},o.plus=function(s,w){var l,d=this,y=d.s;if(s=new c(s,w),w=s.s,!y||!w)return new c(NaN);if(y!=w)return s.s=-w,d.minus(s);var h=d.e/pe,L=s.e/pe,p=d.c,A=s.c;if(!h||!L){if(!p||!A)return new c(y/0);if(!p[0]||!A[0])return A[0]?s:new c(p[0]?d:y*0)}if(h=Ge(h),L=Ge(L),p=p.slice(),y=h-L){for(y>0?(L=h,l=A):(y=-y,l=p),l.reverse();y--;l.push(0));l.reverse()}for(y=p.length,w=A.length,y-w<0&&(l=A,A=p,p=l,w=y),y=0;w;)y=(p[--w]=p[w]+A[w]+y)/Xe|0,p[w]=Xe===p[w]?0:p[w]%Xe;return y&&(p=[y].concat(p),++L),N(s,p,L)},o.precision=o.sd=function(s,w){var l,d,y,h=this;if(s!=null&&s!==!!s)return Re(s,1,Fe),w==null?w=u:Re(w,0,8),$(new c(h),s,w);if(!(l=h.c))return null;if(y=l.length-1,d=y*pe+1,y=l[y]){for(;y%10==0;y/=10,d--);for(y=l[0];y>=10;y/=10,d++);}return s&&h.e+1>d&&(d=h.e+1),d},o.shiftedBy=function(s){return Re(s,-9007199254740991,qo),this.times("1e"+s)},o.squareRoot=o.sqrt=function(){var s,w,l,d,y,h=this,L=h.c,p=h.s,A=h.e,P=a+4,E=new c("0.5");if(p!==1||!L||!L[0])return new c(!p||p<0&&(!L||L[0])?NaN:L?h:1/0);if(p=Math.sqrt(+G(h)),p==0||p==1/0?(w=He(L),(w.length+A)%2==0&&(w+="0"),p=Math.sqrt(+w),A=Ge((A+1)/2)-(A<0||A%2),p==1/0?w="5e"+A:(w=p.toExponential(),w=w.slice(0,w.indexOf("e")+1)+A),l=new c(w)):l=new c(p+""),l.c[0]){for(A=l.e,p=A+P,p<3&&(p=0);;)if(y=l,l=E.times(y.plus(e(h,y,P,1))),He(y.c).slice(0,p)===(w=He(l.c)).slice(0,p))if(l.e<A&&--p,w=w.slice(p-3,p+1),w=="9999"||!d&&w=="4999"){if(!d&&($(y,y.e+a+2,0),y.times(y).eq(h))){l=y;break}P+=4,p+=4,d=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&($(l,l.e+a+2,1),s=!l.times(l).eq(h));break}}return $(l,l.e+a+1,u,s)},o.toExponential=function(s,w){return s!=null&&(Re(s,0,Fe),s++),v(this,s,w,1)},o.toFixed=function(s,w){return s!=null&&(Re(s,0,Fe),s=s+this.e+1),v(this,s,w)},o.toFormat=function(s,w,l){var d,y=this;if(l==null)s!=null&&w&&typeof w=="object"?(l=w,w=null):s&&typeof s=="object"?(l=s,s=w=null):l=m;else if(typeof l!="object")throw Error(Ue+"Argument not an object: "+l);if(d=y.toFixed(s,w),y.c){var h,L=d.split("."),p=+l.groupSize,A=+l.secondaryGroupSize,P=l.groupSeparator||"",E=L[0],k=L[1],S=y.s<0,F=S?E.slice(1):E,J=F.length;if(A&&(h=p,p=A,A=h,J-=h),p>0&&J>0){for(h=J%p||p,E=F.substr(0,h);h<J;h+=p)E+=P+F.substr(h,p);A>0&&(E+=P+F.slice(h)),S&&(E="-"+E)}d=k?E+(l.decimalSeparator||"")+((A=+l.fractionGroupSize)?k.replace(new RegExp("\\d{"+A+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):k):E}return(l.prefix||"")+d+(l.suffix||"")},o.toFraction=function(s){var w,l,d,y,h,L,p,A,P,E,k,S,F=this,J=F.c;if(s!=null&&(p=new c(s),!p.isInteger()&&(p.c||p.s!==1)||p.lt(i)))throw Error(Ue+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+G(p));if(!J)return new c(F);for(w=new c(i),P=l=new c(i),d=A=new c(i),S=He(J),h=w.e=S.length-F.e-1,w.c[0]=$r[(L=h%pe)<0?pe+L:L],s=!s||p.comparedTo(w)>0?h>0?w:P:p,L=x,x=1/0,p=new c(S),A.c[0]=0;E=e(p,w,0,1),y=l.plus(E.times(d)),y.comparedTo(s)!=1;)l=d,d=y,P=A.plus(E.times(y=P)),A=y,w=p.minus(E.times(y=w)),p=y;return y=e(s.minus(l),d,0,1),A=A.plus(y.times(P)),l=l.plus(y.times(d)),A.s=P.s=F.s,h=h*2,k=e(P,d,h,u).minus(F).abs().comparedTo(e(A,l,h,u).minus(F).abs())<1?[P,d]:[A,l],x=L,k},o.toNumber=function(){return+G(this)},o.toPrecision=function(s,w){return s!=null&&Re(s,1,Fe),v(this,s,w,2)},o.toString=function(s){var w,l=this,d=l.s,y=l.e;return y===null?d?(w="Infinity",d<0&&(w="-"+w)):w="NaN":(s==null?w=y<=g||y>=b?Nn(He(l.c),y):at(He(l.c),y,"0"):s===10&&f?(l=$(new c(l),a+y+1,u),w=at(He(l.c),l.e,"0")):(Re(s,2,_.length,"Base"),w=t(at(He(l.c),y,"0"),10,s,d,!0)),d<0&&l.c[0]&&(w="-"+w)),w},o.valueOf=o.toJSON=function(){return G(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,n!=null&&c.set(n),c}function Ge(n){var e=n|0;return n>0||n===e?e:e-1}function He(n){for(var e,t,r=1,o=n.length,i=n[0]+"";r<o;){for(e=n[r++]+"",t=pe-e.length;t--;e="0"+e);i+=e}for(o=i.length;i.charCodeAt(--o)===48;);return i.slice(0,o+1||1)}function vt(n,e){var t,r,o=n.c,i=e.c,a=n.s,u=e.s,g=n.e,b=e.e;if(!a||!u)return null;if(t=o&&!o[0],r=i&&!i[0],t||r)return t?r?0:-u:a;if(a!=u)return a;if(t=a<0,r=g==b,!o||!i)return r?0:!o^t?1:-1;if(!r)return g>b^t?1:-1;for(u=(g=o.length)<(b=i.length)?g:b,a=0;a<u;a++)if(o[a]!=i[a])return o[a]>i[a]^t?1:-1;return g==b?0:g>b^t?1:-1}function Re(n,e,t,r){if(n<e||n>t||n!==ze(n))throw Error(Ue+(r||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function On(n){var e=n.c.length-1;return Ge(n.e/pe)==e&&n.c[e]%2!=0}function Nn(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function at(n,e,t){var r,o;if(e<0){for(o=t+".";++e;o+=t);n=o+n}else if(r=n.length,++e>r){for(o=t,e-=r;--e;o+=t);n+=o}else e<r&&(n=n.slice(0,e)+"."+n.slice(e));return n}bs();class Fl extends Error{}Fl.prototype.name="InvalidTokenError";const Cn={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ft={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},$l={GET_PROVIDER_STATE:"wallet_get_provider_state"},Hr={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Hl(n){return function(t,r,o){o(i=>{r.error&&Bn.warn(`Error in RPC response:
`,r),!t.isTorusInternal&&(Bn.info(`RPC (${n.origin}):`,t,"->",r),i())})}}var zr={},At={},Wo;function di(){if(Wo)return At;Wo=1,Object.defineProperty(At,"__esModule",{value:!0}),At.EthereumProviderError=At.EthereumRpcError=void 0;const n=ts();class e extends Error{constructor(a,u,g){if(!Number.isInteger(a))throw new Error('"code" must be an integer.');if(!u||typeof u!="string")throw new Error('"message" must be a nonempty string.');super(u),this.code=a,g!==void 0&&(this.data=g)}serialize(){const a={code:this.code,message:this.message};return this.data!==void 0&&(a.data=this.data),this.stack&&(a.stack=this.stack),a}toString(){return n.default(this.serialize(),o,2)}}At.EthereumRpcError=e;class t extends e{constructor(a,u,g){if(!r(a))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(a,u,g)}}At.EthereumProviderError=t;function r(i){return Number.isInteger(i)&&i>=1e3&&i<=4999}function o(i,a){if(a!=="[Circular]")return a}return At}var Gr={},Rt={},Fo;function hi(){return Fo||(Fo=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.errorValues=Rt.errorCodes=void 0,Rt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Rt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),Rt}var $o;function ys(){return $o||($o=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.serializeError=n.isValidCode=n.getMessageFromCode=n.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=hi(),t=di(),r=e.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:r,message:a(r)};n.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function a(R,j=o){if(Number.isInteger(R)){const D=R.toString();if(x(e.errorValues,D))return e.errorValues[D].message;if(b(R))return n.JSON_RPC_SERVER_ERROR_MESSAGE}return j}n.getMessageFromCode=a;function u(R){if(!Number.isInteger(R))return!1;const j=R.toString();return!!(e.errorValues[j]||b(R))}n.isValidCode=u;function g(R,{fallbackError:j=i,shouldIncludeStack:D=!1}={}){var m,_;if(!j||!Number.isInteger(j.code)||typeof j.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(R instanceof t.EthereumRpcError)return R.serialize();const f={};if(R&&typeof R=="object"&&!Array.isArray(R)&&x(R,"code")&&u(R.code)){const v=R;f.code=v.code,v.message&&typeof v.message=="string"?(f.message=v.message,x(v,"data")&&(f.data=v.data)):(f.message=a(f.code),f.data={originalError:C(R)})}else{f.code=j.code;const v=(m=R)===null||m===void 0?void 0:m.message;f.message=v&&typeof v=="string"?v:j.message,f.data={originalError:C(R)}}const c=(_=R)===null||_===void 0?void 0:_.stack;return D&&R&&c&&typeof c=="string"&&(f.stack=c),f}n.serializeError=g;function b(R){return R>=-32099&&R<=-32e3}function C(R){return R&&typeof R=="object"&&!Array.isArray(R)?Object.assign({},R):R}function x(R,j){return Object.prototype.hasOwnProperty.call(R,j)}}(Gr)),Gr}var Yt={},Ho;function zl(){if(Ho)return Yt;Ho=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ethErrors=void 0;const n=di(),e=ys(),t=hi();Yt.ethErrors={rpc:{parse:a=>r(t.errorCodes.rpc.parse,a),invalidRequest:a=>r(t.errorCodes.rpc.invalidRequest,a),invalidParams:a=>r(t.errorCodes.rpc.invalidParams,a),methodNotFound:a=>r(t.errorCodes.rpc.methodNotFound,a),internal:a=>r(t.errorCodes.rpc.internal,a),server:a=>{if(!a||typeof a!="object"||Array.isArray(a))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:u}=a;if(!Number.isInteger(u)||u>-32005||u<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return r(u,a)},invalidInput:a=>r(t.errorCodes.rpc.invalidInput,a),resourceNotFound:a=>r(t.errorCodes.rpc.resourceNotFound,a),resourceUnavailable:a=>r(t.errorCodes.rpc.resourceUnavailable,a),transactionRejected:a=>r(t.errorCodes.rpc.transactionRejected,a),methodNotSupported:a=>r(t.errorCodes.rpc.methodNotSupported,a),limitExceeded:a=>r(t.errorCodes.rpc.limitExceeded,a)},provider:{userRejectedRequest:a=>o(t.errorCodes.provider.userRejectedRequest,a),unauthorized:a=>o(t.errorCodes.provider.unauthorized,a),unsupportedMethod:a=>o(t.errorCodes.provider.unsupportedMethod,a),disconnected:a=>o(t.errorCodes.provider.disconnected,a),chainDisconnected:a=>o(t.errorCodes.provider.chainDisconnected,a),custom:a=>{if(!a||typeof a!="object"||Array.isArray(a))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:u,message:g,data:b}=a;if(!g||typeof g!="string")throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(u,g,b)}}};function r(a,u){const[g,b]=i(u);return new n.EthereumRpcError(a,g||e.getMessageFromCode(a),b)}function o(a,u){const[g,b]=i(u);return new n.EthereumProviderError(a,g||e.getMessageFromCode(a),b)}function i(a){if(a){if(typeof a=="string")return[a];if(typeof a=="object"&&!Array.isArray(a)){const{message:u,data:g}=a;if(u&&typeof u!="string")throw new Error("Must specify string message.");return[u||void 0,g]}}return[]}return Yt}var zo;function Gl(){return zo||(zo=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMessageFromCode=n.serializeError=n.EthereumProviderError=n.EthereumRpcError=n.ethErrors=n.errorCodes=void 0;const e=di();Object.defineProperty(n,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(n,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=ys();Object.defineProperty(n,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(n,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const r=zl();Object.defineProperty(n,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const o=hi();Object.defineProperty(n,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(zr)),zr}var yt=Gl(),Vr,Go;function Vl(){return Go||(Go=1,Vr=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[o]))return!1;for(o=r;o--!==0;){var a=i[o];if(!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}),Vr}var Kl=Vl();const Yl=Ut(Kl);var Jl="2.1.0";function _s(n){return n!==null&&typeof n=="object"&&typeof n.pipe=="function"}function Zl(n){return _s(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object"}function Xl(n){return _s(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object"}function Ql(n){return Zl(n)&&Xl(n)}var nt={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:n=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${n} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:n=>`Invalid options. Received: { maxEventListeners: ${n}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:n=>`'args.logger' must include required method '${n}'.`},info:{connected:n=>`Torus: Connected to chain with ID "${n}".`}};const eu={PRODUCTION:"production"},Zt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},tu={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var gi={translations:tu,localStorageKeyPrefix:"torus-"},Ee=Bn.getLogger("solana-embed");function nu(){return(n,e,t)=>{(typeof n.method!="string"||!n.method)&&(e.error=yt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:n})),t(r=>{const{error:o}=e;return o&&Ee.error(`Torus - RPC Error: ${o.message}`,o),r()})}}function ru(n,e,t){let r=`Torus: Lost connection to "${n}".`;e!=null&&e.stack&&(r+=`
${e.stack}`),Ee.warn(r),t&&t.listenerCount("error")>0&&t.emit("error",r)}const Ln=()=>Math.random().toString(36).slice(2),ms=async n=>{let e,t;switch(n){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},iu=()=>{let n=window.navigator.language||"en-US";const e=n.split("-");return n=Object.prototype.hasOwnProperty.call(gi.translations,e[0])?e[0]:"en",n},ou={height:660,width:375},su={height:740,width:1315},au={height:700,width:1200},Es={height:600,width:400};function lu(n){let e;try{e=window[n];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const r=t;return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function Xt(n){let{width:e,height:t}=n;const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,u=1,g=Math.abs((i-e)/2/u+r),b=Math.abs((a-t)/2/u+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/u},width=${e/u},top=${b},left=${g}`}class Ss extends Wn{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!Ql(e))throw new Error(nt.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new La;lo(e,i,e,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const a=Oa();lo(a.stream,i.createStream(o),a.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const u=new lt;u.push(Na()),u.push(nu()),u.push(Hl({origin:location.origin})),u.push(a.middleware),this._rpcEngine=u,this.jsonRpcConnectionEvents=a.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw yt.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if(typeof t!="string"||t.length===0)throw yt.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw yt.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestParams(),data:e});return new Promise((o,i)=>{this._rpcRequest({method:t,params:r},Yr(o,i))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,r)=>{this._rpcRequest(e,Yr(t,r))})}_handleStreamDisconnect(e,t){ru(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Mt=n=>{const e=window.document.createElement("template"),t=n.trim();return e.innerHTML=t,e.content.firstChild};function Pn(n){return n.version===void 0}class vs extends Wn{constructor(e){let{url:t,target:r,features:o,timeout:i=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=r||"_blank",this.features=o||Xt(au),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=i,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),(e=this.window)!=null&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class zn extends Ss{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=Ke({},zn._defaultState),this.torusUrl="",this.dappStorageKey="";const i=gi.translations[iu()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const a=u=>{const{method:g,params:b}=u;if(g===Cn.IFRAME_STATUS){const{isFullScreen:C,rid:x}=b;this._displayIframe({isFull:C,rid:x})}else if(g==="create_window"){const{windowId:C,url:x}=b;this._createPopupBlockAlert(C,x)}else if(g===Cn.CLOSE_WINDOW)this._handleCloseWindow(b);else if(g===Cn.USER_LOGGED_IN){const{currentLoginProvider:C}=b;this._state.isLoggedIn=!0,this._state.currentLoginProvider=C}else g===Cn.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",a)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:r,torusAlertContainer:o,torusIframe:i}=e;this.torusUrl=t,this.dappStorageKey=r,this.torusAlertContainer=o,this.torusIframe=i,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:a,isLoggedIn:u}=await this.request({method:ft.GET_PROVIDER_STATE,params:[]});this._handleConnect(a,u)}catch(t){Ee.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{Ee.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:r,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(i.hash?i.hash+=`&dappStorageKey=${this.dappStorageKey}`:i.hash=`#dappStorageKey=${this.dappStorageKey}`);const a=new vs({url:i,target:r,features:o});if(a.open(),!a.window){this._createPopupBlockAlert(e,i.href);return}this.windowRefs[e]=a,this.request({method:"opened_window",params:{windowId:e}}),a.once("close",()=>{delete this.windowRefs[e],this.request({method:ft.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={};if(e)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case Zt.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case Zt.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case Zt.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case Zt.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=e,this.request({method:ft.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const r=t,o=e;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,r)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),Ee.debug(nt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let r;e?(r=new yt.EthereumRpcError(1013,t||nt.errors.disconnected()),Ee.debug(r)):(r=new yt.EthereumRpcError(1011,t||nt.errors.permanentlyDisconnected()),Ee.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const r=this.getLogoUrl(),o=Mt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),i=Mt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),a=Mt('<div id="torusAlert__btn-container"></div>');a.appendChild(i),o.appendChild(a);const u=()=>{i.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:Xt(Es)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(o)})(),u(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(zn,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Gn extends Ss{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=Ke({},Gn._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const i=a=>{const{method:u,params:g}=a;u===Hr.ACCOUNTS_CHANGED?this._handleAccountsChanged(g):u===Hr.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(g):u===Hr.CHAIN_CHANGED&&this._handleChainChanged(g)};this.jsonRpcConnectionEvents.on("notification",i)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r}=await this.request({method:$l.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){Ee.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{Ee.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;const i=e;if(!Array.isArray(i)){if(i.jsonrpc||(i.jsonrpc="2.0"),i.method==="solana_accounts"||i.method==="solana_requestAccounts")o=(a,u)=>{this._handleAccountsChanged(u.result||[],i.method==="solana_accounts",r),t(a,u)};else if(i.method==="wallet_getProviderState"){this._rpcEngine.handle(e,o);return}}this.tryWindowHandle(i,o)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),Ee.debug(nt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let r;e?(r=new yt.EthereumRpcError(1013,t||nt.errors.disconnected()),Ee.debug(r)):(r=new yt.EthereumRpcError(1011,t||nt.errors.permanentlyDisconnected()),Ee.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e;Array.isArray(o)||(Ee.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const i of e)if(typeof i!="string"){Ee.error("Torus: Received non-string account. Please report this bug.",e),o=[];break}Yl(this._state.accounts,o)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&Ee.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){Ee.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){Ee.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge(Gn,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Vo(n){return new Promise((e,t)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=n}catch(r){t(r)}})}const uu=n=>{const{document:e}=n,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:n.location.hostname};async function fu(n){try{const{document:e}=n;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Vo(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href),t&&await Vo(t.href))?t.href:""}catch{return""}}const cu=async()=>({name:uu(window),icon:await fu(window)}),du=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],hu=[ft.SET_PROVIDER],gu=lu("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await ms("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){Ee.warn(e)}})();class yu{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=eu.PRODUCTION,enableLogging:t=!1,network:r,showTorusButton:o=!1,useLocalStorage:i=!1,buttonPosition:a=Zt.BOTTOM_LEFT,apiKey:u="torus-default",extraParams:g={},whiteLabel:b}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:C,logLevel:x}=await ms(e);Ee.enableAll(),Ee.info(C,"url loaded"),Ee.info(`Solana Embed Version :${Jl}`),this.torusUrl=C,Ee.setDefaultLevel(x),t?Ee.enableAll():Ee.disableAll();const R=this.handleDappStorageKey(i),j=new URL(C);j.pathname.endsWith("/")?j.pathname+="frame":j.pathname+="/frame";const D=new URLSearchParams;return R&&D.append("dappStorageKey",R),D.append("origin",window.location.origin),j.hash=D.toString(),this.torusIframe=Mt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${j.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Mt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Mt(`<link href="${C}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((m,_)=>{try{this.torusIframe.addEventListener("load",async()=>{const f=await cu();this.torusIframe.contentWindow.postMessage({buttonPosition:a,apiKey:u,network:r,dappMetadata:f,extraParams:g,whiteLabel:b},j.origin),await this._setupWeb3({torusUrl:C}),o&&this.showTorusButton(),b!=null&&b.topupHide?this.isTopupHidden=b.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,m()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(f){_(f)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((r,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Yr(r,o))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw Ee.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:r}=e,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:r}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ft.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:ft.SET_PROVIDER,params:Ke({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=await this.communicationProvider.request({method:ft.WALLET_INSTANCE_ID,params:[]}),o=e?`/${e}`:"",i=new URL(`${this.torusUrl}/wallet${o}`);i.searchParams.append("instanceId",r),Object.keys(t).forEach(u=>{i.searchParams.append(u,t[u])}),this.dappStorageKey&&(i.hash=`#dappStorageKey=${this.dappStorageKey}`),new vs({url:i,features:Xt(su)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ft.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=Ln();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:ft.TOPUP,params:{provider:e,params:t,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=Pn(e),r=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const r=Pn(e),o=r?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:r}})}}async signTransaction(e){const t=Pn(e),r=t?e.serializeMessage().toString("hex"):Buffer.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:t}}),i=JSON.parse(o),a={publicKey:new Ri(i.publicKey),signature:Buffer.from(i.signature,"hex")};return e.addSignature(a.publicKey,a.signature),e}async signAllTransactions(e){let t;const r=e.map(a=>(t=Pn(a),t?a.serializeMessage().toString("hex"):Buffer.from(a.message.serialize()).toString("hex"))),i=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:t}})).map(a=>{const u=JSON.parse(a);return{publicKey:new Ri(u.publicKey),signature:Buffer.from(u.signature,"hex")}});return e.forEach((a,u)=>(a.addSignature(i[u].publicKey,i[u].signature),a)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${gi.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(gu&&e){const o=window.localStorage.getItem(t);if(o)r=o;else{const i=`torus-app-${Ln()}`;window.localStorage.setItem(t,i),r=i}}return this.dappStorageKey=r,r}async _setupWeb3(e){Ee.info("setupWeb3 running");const t=new co({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new co({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new Gn(t,{}),i=new zn(r,{});o.tryWindowHandle=(b,C)=>{const x=b;if(!Array.isArray(x)&&du.includes(x.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const R=Ln();i._handleWindow(R,{target:"_blank",features:Xt(Es)}),x.windowId=R}o._rpcEngine.handle(x,C)},i.tryWindowHandle=(b,C)=>{const x=b;if(!Array.isArray(x)&&hu.includes(x.method)){const R=Ln();i._handleWindow(R,{target:"_blank",features:Xt(ou)}),x.params.windowId=R}i._rpcEngine.handle(x,C)};const a=b=>{const C=o[b],x=this;o[b]=function(j,D){const{method:m,params:_=[]}=j;if(m==="solana_requestAccounts"){if(!D)return x.login({loginProvider:_[0]});x.login({loginProvider:_[0]}).then(f=>D(null,f)).catch(f=>D(f))}return C.apply(this,[j,D])}};a("request"),a("sendAsync"),a("send");const u=new Proxy(o,{deleteProperty:()=>!0}),g=new Proxy(i,{deleteProperty:()=>!0});this.provider=u,this.communicationProvider=g,await Promise.all([o._initializeState(),i._initializeState(Ke(Ke({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),Ee.debug("Torus - injected provider")}}export{Zt as BUTTON_POSITION,eu as TORUS_BUILD_ENV,Gn as TorusInPageProvider,yu as default};
